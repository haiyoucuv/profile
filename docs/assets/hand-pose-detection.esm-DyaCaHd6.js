import{n as zr}from"./index-BigcdQAd.js";import{i2 as Dr,e0 as Tt,j as tn,dU as rt,eC as Re,cJ as en,el as wt,i6 as Jn,d2 as ke,e5 as Dt,eT as qn,eS as rn,bL as ot,as as jt,a9 as gt,ah as at,ae as Vr,cu as Yr,al as Ft,ba as Gr,cq as ti,d1 as ei,g as Wr}from"./graph_model-HyHReiP6.js";var je={},Xr;function ri(){return Xr||(Xr=1,(function(){var l;function f(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}var c=typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,r){return t==Array.prototype||t==Object.prototype||(t[e]=r.value),t};function p(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof zr=="object"&&zr];for(var e=0;e<t.length;++e){var r=t[e];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}var s=p(this);function d(t,e){if(e)t:{var r=s;t=t.split(".");for(var n=0;n<t.length-1;n++){var i=t[n];if(!(i in r))break t;r=r[i]}t=t[t.length-1],n=r[t],e=e(n),e!=n&&e!=null&&c(r,t,{configurable:!0,writable:!0,value:e})}}d("Symbol",function(t){function e(u){if(this instanceof e)throw new TypeError("Symbol is not a constructor");return new r(n+(u||"")+"_"+i++,u)}function r(u,o){this.h=u,c(this,"description",{configurable:!0,writable:!0,value:o})}if(t)return t;r.prototype.toString=function(){return this.h};var n="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0;return e}),d("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),r=0;r<e.length;r++){var n=s[e[r]];typeof n=="function"&&typeof n.prototype[t]!="function"&&c(n.prototype,t,{configurable:!0,writable:!0,value:function(){return y(f(this))}})}return t});function y(t){return t={next:t},t[Symbol.iterator]=function(){return this},t}function g(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:f(t)}}function v(t){if(!(t instanceof Array)){t=g(t);for(var e,r=[];!(e=t.next()).done;)r.push(e.value);t=r}return t}var w=typeof Object.assign=="function"?Object.assign:function(t,e){for(var r=1;r<arguments.length;r++){var n=arguments[r];if(n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t};d("Object.assign",function(t){return t||w});var m=typeof Object.create=="function"?Object.create:function(t){function e(){}return e.prototype=t,new e},M;if(typeof Object.setPrototypeOf=="function")M=Object.setPrototypeOf;else{var j;t:{var _={a:!0},S={};try{S.__proto__=_,j=S.a;break t}catch{}j=!1}M=j?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null}var F=M;function L(t,e){if(t.prototype=m(e.prototype),t.prototype.constructor=t,F)F(t,e);else for(var r in e)if(r!="prototype")if(Object.defineProperties){var n=Object.getOwnPropertyDescriptor(e,r);n&&Object.defineProperty(t,r,n)}else t[r]=e[r];t.ya=e.prototype}function H(){this.m=!1,this.j=null,this.i=void 0,this.h=1,this.v=this.s=0,this.l=null}function V(t){if(t.m)throw new TypeError("Generator is already running");t.m=!0}H.prototype.u=function(t){this.i=t};function B(t,e){t.l={ma:e,na:!0},t.h=t.s||t.v}H.prototype.return=function(t){this.l={return:t},this.h=this.v};function C(t,e,r){return t.h=r,{value:e}}function I(t){this.h=new H,this.i=t}function U(t,e){V(t.h);var r=t.h.j;return r?Y(t,"return"in r?r.return:function(n){return{value:n,done:!0}},e,t.h.return):(t.h.return(e),z(t))}function Y(t,e,r,n){try{var i=e.call(t.h.j,r);if(!(i instanceof Object))throw new TypeError("Iterator result "+i+" is not an object");if(!i.done)return t.h.m=!1,i;var u=i.value}catch(o){return t.h.j=null,B(t.h,o),z(t)}return t.h.j=null,n.call(t.h,u),z(t)}function z(t){for(;t.h.h;)try{var e=t.i(t.h);if(e)return t.h.m=!1,{value:e.value,done:!1}}catch(r){t.h.i=void 0,B(t.h,r)}if(t.h.m=!1,t.h.l){if(e=t.h.l,t.h.l=null,e.na)throw e.ma;return{value:e.return,done:!0}}return{value:void 0,done:!0}}function k(t){this.next=function(e){return V(t.h),t.h.j?e=Y(t,t.h.j.next,e,t.h.u):(t.h.u(e),e=z(t)),e},this.throw=function(e){return V(t.h),t.h.j?e=Y(t,t.h.j.throw,e,t.h.u):(B(t.h,e),e=z(t)),e},this.return=function(e){return U(t,e)},this[Symbol.iterator]=function(){return this}}function N(t){function e(n){return t.next(n)}function r(n){return t.throw(n)}return new Promise(function(n,i){function u(o){o.done?n(o.value):Promise.resolve(o.value).then(e,r).then(u,i)}u(t.next())})}function R(t){return N(new k(new I(t)))}d("Promise",function(t){function e(o){this.i=0,this.j=void 0,this.h=[],this.u=!1;var a=this.l();try{o(a.resolve,a.reject)}catch(h){a.reject(h)}}function r(){this.h=null}function n(o){return o instanceof e?o:new e(function(a){a(o)})}if(t)return t;r.prototype.i=function(o){if(this.h==null){this.h=[];var a=this;this.j(function(){a.m()})}this.h.push(o)};var i=s.setTimeout;r.prototype.j=function(o){i(o,0)},r.prototype.m=function(){for(;this.h&&this.h.length;){var o=this.h;this.h=[];for(var a=0;a<o.length;++a){var h=o[a];o[a]=null;try{h()}catch(x){this.l(x)}}}this.h=null},r.prototype.l=function(o){this.j(function(){throw o})},e.prototype.l=function(){function o(x){return function(A){h||(h=!0,x.call(a,A))}}var a=this,h=!1;return{resolve:o(this.I),reject:o(this.m)}},e.prototype.I=function(o){if(o===this)this.m(new TypeError("A Promise cannot resolve to itself"));else if(o instanceof e)this.L(o);else{t:switch(typeof o){case"object":var a=o!=null;break t;case"function":a=!0;break t;default:a=!1}a?this.F(o):this.s(o)}},e.prototype.F=function(o){var a=void 0;try{a=o.then}catch(h){this.m(h);return}typeof a=="function"?this.M(a,o):this.s(o)},e.prototype.m=function(o){this.v(2,o)},e.prototype.s=function(o){this.v(1,o)},e.prototype.v=function(o,a){if(this.i!=0)throw Error("Cannot settle("+o+", "+a+"): Promise already settled in state"+this.i);this.i=o,this.j=a,this.i===2&&this.K(),this.H()},e.prototype.K=function(){var o=this;i(function(){if(o.D()){var a=s.console;typeof a<"u"&&a.error(o.j)}},1)},e.prototype.D=function(){if(this.u)return!1;var o=s.CustomEvent,a=s.Event,h=s.dispatchEvent;return typeof h>"u"?!0:(typeof o=="function"?o=new o("unhandledrejection",{cancelable:!0}):typeof a=="function"?o=new a("unhandledrejection",{cancelable:!0}):(o=s.document.createEvent("CustomEvent"),o.initCustomEvent("unhandledrejection",!1,!0,o)),o.promise=this,o.reason=this.j,h(o))},e.prototype.H=function(){if(this.h!=null){for(var o=0;o<this.h.length;++o)u.i(this.h[o]);this.h=null}};var u=new r;return e.prototype.L=function(o){var a=this.l();o.T(a.resolve,a.reject)},e.prototype.M=function(o,a){var h=this.l();try{o.call(a,h.resolve,h.reject)}catch(x){h.reject(x)}},e.prototype.then=function(o,a){function h(T,b){return typeof T=="function"?function(O){try{x(T(O))}catch(P){A(P)}}:b}var x,A,E=new e(function(T,b){x=T,A=b});return this.T(h(o,x),h(a,A)),E},e.prototype.catch=function(o){return this.then(void 0,o)},e.prototype.T=function(o,a){function h(){switch(x.i){case 1:o(x.j);break;case 2:a(x.j);break;default:throw Error("Unexpected state: "+x.i)}}var x=this;this.h==null?u.i(h):this.h.push(h),this.u=!0},e.resolve=n,e.reject=function(o){return new e(function(a,h){h(o)})},e.race=function(o){return new e(function(a,h){for(var x=g(o),A=x.next();!A.done;A=x.next())n(A.value).T(a,h)})},e.all=function(o){var a=g(o),h=a.next();return h.done?n([]):new e(function(x,A){function E(O){return function(P){T[O]=P,b--,b==0&&x(T)}}var T=[],b=0;do T.push(void 0),b++,n(h.value).T(E(T.length-1),A),h=a.next();while(!h.done)})},e});function q(t,e){t instanceof String&&(t+="");var r=0,n=!1,i={next:function(){if(!n&&r<t.length){var u=r++;return{value:e(u,t[u]),done:!1}}return n=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}d("Array.prototype.keys",function(t){return t||function(){return q(this,function(e){return e})}}),d("Array.prototype.fill",function(t){return t||function(e,r,n){var i=this.length||0;for(0>r&&(r=Math.max(0,i+r)),(n==null||n>i)&&(n=i),n=Number(n),0>n&&(n=Math.max(0,i+n)),r=Number(r||0);r<n;r++)this[r]=e;return this}});function K(t){return t||Array.prototype.fill}d("Int8Array.prototype.fill",K),d("Uint8Array.prototype.fill",K),d("Uint8ClampedArray.prototype.fill",K),d("Int16Array.prototype.fill",K),d("Uint16Array.prototype.fill",K),d("Int32Array.prototype.fill",K),d("Uint32Array.prototype.fill",K),d("Float32Array.prototype.fill",K),d("Float64Array.prototype.fill",K),d("Object.is",function(t){return t||function(e,r){return e===r?e!==0||1/e===1/r:e!==e&&r!==r}}),d("Array.prototype.includes",function(t){return t||function(e,r){var n=this;n instanceof String&&(n=String(n));var i=n.length;for(r=r||0,0>r&&(r=Math.max(r+i,0));r<i;r++){var u=n[r];if(u===e||Object.is(u,e))return!0}return!1}}),d("String.prototype.includes",function(t){return t||function(e,r){if(this==null)throw new TypeError("The 'this' value for String.prototype.includes must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype.includes must not be a regular expression");return this.indexOf(e,r||0)!==-1}});var st=this||self;function $(t,e){t=t.split(".");var r=st;t[0]in r||typeof r.execScript>"u"||r.execScript("var "+t[0]);for(var n;t.length&&(n=t.shift());)t.length||e===void 0?r[n]&&r[n]!==Object.prototype[n]?r=r[n]:r=r[n]={}:r[n]=e}function xt(t){var e;t:{if((e=st.navigator)&&(e=e.userAgent))break t;e=""}return e.indexOf(t)!=-1}var Et=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var r=t.length,n=Array(r),i=typeof t=="string"?t.split(""):t,u=0;u<r;u++)u in i&&(n[u]=e.call(void 0,i[u],u,t));return n},Ne={},Rt=null;function un(t){var e=t.length,r=3*e/4;r%3?r=Math.floor(r):"=.".indexOf(t[e-1])!=-1&&(r="=.".indexOf(t[e-2])!=-1?r-2:r-1);var n=new Uint8Array(r),i=0;return an(t,function(u){n[i++]=u}),i!==r?n.subarray(0,i):n}function an(t,e){function r(h){for(;n<t.length;){var x=t.charAt(n++),A=Rt[x];if(A!=null)return A;if(!/^[\s\xa0]*$/.test(x))throw Error("Unknown base64 encoding at char: "+x)}return h}Pe();for(var n=0;;){var i=r(-1),u=r(0),o=r(64),a=r(64);if(a===64&&i===-1)break;e(i<<2|u>>4),o!=64&&(e(u<<4&240|o>>2),a!=64&&e(o<<6&192|a))}}function Pe(){if(!Rt){Rt={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],r=0;5>r;r++){var n=t.concat(e[r].split(""));Ne[r]=n;for(var i=0;i<n.length;i++){var u=n[i];Rt[u]===void 0&&(Rt[u]=i)}}}}var ie=typeof Uint8Array<"u",Le=!(xt("Trident")||xt("MSIE"))&&typeof st.btoa=="function";function Ue(t){if(!Le){var e;e===void 0&&(e=0),Pe(),e=Ne[e];for(var r=Array(Math.floor(t.length/3)),n=e[64]||"",i=0,u=0;i<t.length-2;i+=3){var o=t[i],a=t[i+1],h=t[i+2],x=e[o>>2];o=e[(o&3)<<4|a>>4],a=e[(a&15)<<2|h>>6],h=e[h&63],r[u++]=x+o+a+h}switch(x=0,h=n,t.length-i){case 2:x=t[i+1],h=e[(x&15)<<2]||n;case 1:t=t[i],r[u]=e[t>>2]+e[(t&3)<<4|x>>4]+h+n}return r.join("")}for(e="";10240<t.length;)e+=String.fromCharCode.apply(null,t.subarray(0,10240)),t=t.subarray(10240);return e+=String.fromCharCode.apply(null,t),btoa(e)}var Be=RegExp("[-_.]","g");function sn(t){switch(t){case"-":return"+";case"_":return"/";case".":return"=";default:return""}}function He(t){if(!Le)return un(t);Be.test(t)&&(t=t.replace(Be,sn)),t=atob(t);for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}var ze;function oe(){return ze||(ze=new Uint8Array(0))}var kt={},ln=typeof Uint8Array.prototype.slice=="function",Z=0,et=0;function De(t){var e=0>t;t=Math.abs(t);var r=t>>>0;t=Math.floor((t-r)/4294967296),e&&(r=g(Ve(r,t)),e=r.next().value,t=r.next().value,r=e),Z=r>>>0,et=t>>>0}var hn=typeof BigInt=="function";function Ve(t,e){return e=~e,t?t=~t+1:e+=1,[t,e]}function Ye(t,e){this.i=t>>>0,this.h=e>>>0}function Ge(t){if(!t)return We||(We=new Ye(0,0));if(!/^-?\d+$/.test(t))return null;if(16>t.length)De(Number(t));else if(hn)t=BigInt(t),Z=Number(t&BigInt(4294967295))>>>0,et=Number(t>>BigInt(32)&BigInt(4294967295));else{var e=+(t[0]==="-");et=Z=0;for(var r=t.length,n=e,i=(r-e)%6+e;i<=r;n=i,i+=6)n=Number(t.slice(n,i)),et*=1e6,Z=1e6*Z+n,4294967296<=Z&&(et+=Z/4294967296|0,Z%=4294967296);e&&(e=g(Ve(Z,et)),t=e.next().value,e=e.next().value,Z=t,et=e)}return new Ye(Z,et)}var We;function Xe(t,e){return Error("Invalid wire type: "+t+" (at position "+e+")")}function ue(){return Error("Failed to read varint, encoding is invalid.")}function Ke(t,e){return Error("Tried to read past the end of the data "+e+" > "+t)}function At(){throw Error("Invalid UTF8")}function Ze(t,e){return e=String.fromCharCode.apply(null,e),t==null?e:t+e}var Vt=void 0,ae,fn=typeof TextDecoder<"u",$e,cn=typeof TextEncoder<"u",Qe;function Je(t){if(t!==kt)throw Error("illegal external caller")}function Nt(t,e){if(Je(e),this.V=t,t!=null&&t.length===0)throw Error("ByteString should be constructed with non-empty values")}function se(){return Qe||(Qe=new Nt(null,kt))}function qe(t){Je(kt);var e=t.V;return e=e==null||ie&&e!=null&&e instanceof Uint8Array?e:typeof e=="string"?He(e):null,e==null?e:t.V=e}function dn(t){if(typeof t=="string")return{buffer:He(t),C:!1};if(Array.isArray(t))return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Uint8Array)return{buffer:t,C:!1};if(t.constructor===ArrayBuffer)return{buffer:new Uint8Array(t),C:!1};if(t.constructor===Nt)return{buffer:qe(t)||oe(),C:!0};if(t instanceof Uint8Array)return{buffer:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),C:!1};throw Error("Type not convertible to a Uint8Array, expected a Uint8Array, an ArrayBuffer, a base64 encoded string, a ByteString or an Array of numbers")}function tr(t,e){this.i=null,this.m=!1,this.h=this.j=this.l=0,le(this,t,e)}function le(t,e,r){r=r===void 0?{}:r,t.S=r.S===void 0?!1:r.S,e&&(e=dn(e),t.i=e.buffer,t.m=e.C,t.l=0,t.j=t.i.length,t.h=t.l)}tr.prototype.reset=function(){this.h=this.l};function bt(t,e){if(t.h=e,e>t.j)throw Ke(t.j,e)}function Pt(t){var e=t.i,r=t.h,n=e[r++],i=n&127;if(n&128&&(n=e[r++],i|=(n&127)<<7,n&128&&(n=e[r++],i|=(n&127)<<14,n&128&&(n=e[r++],i|=(n&127)<<21,n&128&&(n=e[r++],i|=n<<28,n&128&&e[r++]&128&&e[r++]&128&&e[r++]&128&&e[r++]&128&&e[r++]&128)))))throw ue();return bt(t,r),i}function er(t,e){if(0>e)throw Error("Tried to read a negative byte length: "+e);var r=t.h,n=r+e;if(n>t.j)throw Ke(e,t.j-r);return t.h=n,r}var rr=[];function he(){this.h=[]}he.prototype.length=function(){return this.h.length},he.prototype.end=function(){var t=this.h;return this.h=[],t};function nr(t,e,r){for(;0<r||127<e;)t.h.push(e&127|128),e=(e>>>7|r<<25)>>>0,r>>>=7;t.h.push(e)}function _t(t,e){for(;127<e;)t.h.push(e&127|128),e>>>=7;t.h.push(e)}function fe(t,e){if(rr.length){var r=rr.pop();le(r,t,e),t=r}else t=new tr(t,e);this.h=t,this.j=this.h.h,this.i=this.l=-1,this.setOptions(e)}fe.prototype.setOptions=function(t){t=t===void 0?{}:t,this.ca=t.ca===void 0?!1:t.ca},fe.prototype.reset=function(){this.h.reset(),this.j=this.h.h,this.i=this.l=-1};function ir(t){var e=t.h;if(e.h==e.j)return!1;t.j=t.h.h;var r=Pt(t.h)>>>0;if(e=r>>>3,r&=7,!(0<=r&&5>=r))throw Xe(r,t.j);if(1>e)throw Error("Invalid field number: "+e+" (at position "+t.j+")");return t.l=e,t.i=r,!0}function Yt(t){switch(t.i){case 0:if(t.i!=0)Yt(t);else t:{t=t.h;for(var e=t.h,r=e+10,n=t.i;e<r;)if((n[e++]&128)===0){bt(t,e);break t}throw ue()}break;case 1:t=t.h,bt(t,t.h+8);break;case 2:t.i!=2?Yt(t):(e=Pt(t.h)>>>0,t=t.h,bt(t,t.h+e));break;case 5:t=t.h,bt(t,t.h+4);break;case 3:e=t.l;do{if(!ir(t))throw Error("Unmatched start-group tag: stream EOF");if(t.i==4){if(t.l!=e)throw Error("Unmatched end-group tag");break}Yt(t)}while(!0);break;default:throw Xe(t.i,t.j)}}var Gt=[];function pn(){this.j=[],this.i=0,this.h=new he}function Ot(t,e){e.length!==0&&(t.j.push(e),t.i+=e.length)}function vn(t,e){if(e=e.R){Ot(t,t.h.end());for(var r=0;r<e.length;r++)Ot(t,qe(e[r])||oe())}}var mt=typeof Symbol=="function"&&typeof Symbol()=="symbol"?Symbol():void 0;function St(t,e){return mt?t[mt]|=e:t.A!==void 0?t.A|=e:(Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}}),e)}function or(t,e){mt?t[mt]&&(t[mt]&=~e):t.A!==void 0&&(t.A&=~e)}function X(t){var e;return mt?e=t[mt]:e=t.A,e??0}function dt(t,e){mt?t[mt]=e:t.A!==void 0?t.A=e:Object.defineProperties(t,{A:{value:e,configurable:!0,writable:!0,enumerable:!1}})}function ce(t){return St(t,1),t}function yn(t,e){dt(e,(t|0)&-51)}function Wt(t,e){dt(e,(t|18)&-41)}var de={};function Xt(t){return t!==null&&typeof t=="object"&&!Array.isArray(t)&&t.constructor===Object}var Lt,ur=[];dt(ur,23),Lt=Object.freeze(ur);function pe(t){if(X(t.o)&2)throw Error("Cannot mutate an immutable Message")}function ve(t){var e=t.length;(e=e?t[e-1]:void 0)&&Xt(e)?e.g=1:(e={},t.push((e.g=1,e)))}function ar(t){var e=t.i+t.G;return t.B||(t.B=t.o[e]={})}function lt(t,e){return e===-1?null:e>=t.i?t.B?t.B[e]:void 0:t.o[e+t.G]}function pt(t,e,r,n){pe(t),Ut(t,e,r,n)}function Ut(t,e,r,n){t.j&&(t.j=void 0),e>=t.i||n?ar(t)[e]=r:(t.o[e+t.G]=r,(t=t.B)&&e in t&&delete t[e])}function ye(t,e,r,n){var i=lt(t,e);Array.isArray(i)||(i=Lt);var u=X(i);if(u&1||ce(i),n)u&2||St(i,2),r&1||Object.freeze(i);else{n=!(r&2);var o=u&2;r&1||!o?n&&u&16&&!o&&or(i,16):(i=ce(Array.prototype.slice.call(i)),Ut(t,e,i))}return i}function me(t,e){var r=lt(t,e),n=r==null?r:typeof r=="number"||r==="NaN"||r==="Infinity"||r==="-Infinity"?Number(r):void 0;return n!=null&&n!==r&&Ut(t,e,n),n}function sr(t,e,r,n,i){t.h||(t.h={});var u=t.h[r],o=ye(t,r,3,i);if(!u){var a=o;u=[];var h=!!(X(t.o)&16);o=!!(X(a)&2);var x=a;!i&&o&&(a=Array.prototype.slice.call(a));for(var A=o,E=0;E<a.length;E++){var T=a[E],b=e,O=!1;if(O=O===void 0?!1:O,T=Array.isArray(T)?new b(T):O?new b:void 0,T!==void 0){b=T.o;var P=O=X(b);o&&(P|=2),h&&(P|=16),P!=O&&dt(b,P),b=P,A=A||!!(2&b),u.push(T)}}return t.h[r]=u,h=X(a),e=h|33,e=A?e&-9:e|8,h!=e&&(A=a,Object.isFrozen(A)&&(A=Array.prototype.slice.call(A)),dt(A,e),a=A),x!==a&&Ut(t,r,a),(i||n&&o)&&St(u,2),n&&Object.freeze(u),u}return i||(i=Object.isFrozen(u),n&&!i?Object.freeze(u):!n&&i&&(u=Array.prototype.slice.call(u),t.h[r]=u)),u}function Kt(t,e,r){var n=!!(X(t.o)&2);if(e=sr(t,e,r,n,n),t=ye(t,r,3,n),!(n||X(t)&8)){for(n=0;n<e.length;n++){if(r=e[n],X(r.o)&2){var i=pr(r,!1);i.j=r}else i=r;r!==i&&(e[n]=i,t[n]=i.o)}St(t,8)}return e}function vt(t,e,r){if(r!=null&&typeof r!="number")throw Error("Value of float/double field must be a number|null|undefined, found "+typeof r+": "+r);pt(t,e,r)}function lr(t,e,r,n,i){pe(t);var u=sr(t,r,e,!1,!1);return r=n??new r,t=ye(t,e,2,!1),i!=null?(u.splice(i,0,r),t.splice(i,0,r.o)):(u.push(r),t.push(r.o)),r.C()&&or(t,8),r}function Zt(t,e){return t??e}function yt(t,e,r){return r=r===void 0?0:r,Zt(me(t,e),r)}var $t;function mn(t){switch(typeof t){case"number":return isFinite(t)?t:String(t);case"object":if(t)if(Array.isArray(t)){if((X(t)&128)!==0)return t=Array.prototype.slice.call(t),ve(t),t}else{if(ie&&t!=null&&t instanceof Uint8Array)return Ue(t);if(t instanceof Nt){var e=t.V;return e==null?"":typeof e=="string"?e:t.V=Ue(e)}}}return t}function hr(t,e,r,n){if(t!=null){if(Array.isArray(t))t=ge(t,e,r,n!==void 0);else if(Xt(t)){var i={},u;for(u in t)i[u]=hr(t[u],e,r,n);t=i}else t=e(t,n);return t}}function ge(t,e,r,n){var i=X(t);n=n?!!(i&16):void 0,t=Array.prototype.slice.call(t);for(var u=0;u<t.length;u++)t[u]=hr(t[u],e,r,n);return r(i,t),t}function gn(t){return t.ja===de?t.toJSON():mn(t)}function wn(t,e){t&128&&ve(e)}function fr(t,e,r){if(r=r===void 0?Wt:r,t!=null){if(ie&&t instanceof Uint8Array)return t.length?new Nt(new Uint8Array(t),kt):se();if(Array.isArray(t)){var n=X(t);return n&2?t:e&&!(n&32)&&(n&16||n===0)?(dt(t,n|2),t):(t=ge(t,fr,n&4?Wt:r,!0),e=X(t),e&4&&e&2&&Object.freeze(t),t)}return t.ja===de?dr(t):t}}function cr(t,e,r,n,i,u,o){if(t=t.h&&t.h[r]){if(n=X(t),n&2?n=t:(u=Et(t,dr),Wt(n,u),Object.freeze(u),n=u),pe(e),o=n==null?Lt:ce([]),n!=null){for(u=!!n.length,t=0;t<n.length;t++){var a=n[t];u=u&&!(X(a.o)&2),o[t]=a.o}u=(u?8:0)|1,t=X(o),(t&u)!==u&&(Object.isFrozen(o)&&(o=Array.prototype.slice.call(o)),dt(o,t|u)),e.h||(e.h={}),e.h[r]=n}else e.h&&(e.h[r]=void 0);Ut(e,r,o,i)}else pt(e,r,fr(n,u,o),i)}function dr(t){return X(t.o)&2||(t=pr(t,!0),St(t.o,2)),t}function pr(t,e){var r=t.o,n=[];St(n,16);var i=t.constructor.h;if(i&&n.push(i),i=t.B,i){n.length=r.length,n.fill(void 0,n.length,r.length);var u={};n[n.length-1]=u}(X(r)&128)!==0&&ve(n),e=e||t.C()?Wt:yn,u=t.constructor,$t=n,n=new u(n),$t=void 0,t.R&&(n.R=t.R.slice()),u=!!(X(r)&16);for(var o=i?r.length-1:r.length,a=0;a<o;a++)cr(t,n,a-t.G,r[a],!1,u,e);if(i)for(var h in i)cr(t,n,+h,i[h],!0,u,e);return n}function nt(t,e,r){t==null&&(t=$t),$t=void 0;var n=this.constructor.i||0,i=0<n,u=this.constructor.h,o=!1;if(t==null){t=u?[u]:[];var a=48,h=!0;i&&(n=0,a|=128),dt(t,a)}else{if(!Array.isArray(t)||u&&u!==t[0])throw Error();var x=a=St(t,0);if((h=(16&x)!==0)&&((o=(32&x)!==0)||(x|=32)),i){if(128&x)n=0;else if(0<t.length){var A=t[t.length-1];if(Xt(A)&&"g"in A){n=0,x|=128,delete A.g;var E=!0,T;for(T in A){E=!1;break}E&&t.pop()}}}else if(128&x)throw Error();a!==x&&dt(t,x)}this.G=(u?0:-1)-n,this.h=void 0,this.o=t;t:{if(u=this.o.length,n=u-1,u&&(u=this.o[n],Xt(u))){this.B=u,this.i=n-this.G;break t}e!==void 0&&-1<e?(this.i=Math.max(e,n+1-this.G),this.B=void 0):this.i=Number.MAX_VALUE}if(!i&&this.B&&"g"in this.B)throw Error('Unexpected "g" flag in sparse object of message that is not a group type.');if(r){e=h&&!o&&!0,i=this.i;var b;for(h=0;h<r.length;h++)o=r[h],o<i?(o+=this.G,(n=t[o])?vr(n,e):t[o]=Lt):(b||(b=ar(this)),(n=b[o])?vr(n,e):b[o]=Lt)}}nt.prototype.toJSON=function(){return ge(this.o,gn,wn)},nt.prototype.C=function(){return!!(X(this.o)&2)};function vr(t,e){if(Array.isArray(t)){var r=X(t),n=1;!e||r&2||(n|=16),(r&n)!==n&&dt(t,r|n)}}nt.prototype.ja=de,nt.prototype.toString=function(){return this.o.toString()};function yr(t,e,r){if(r){var n={},i;for(i in r){var u=r[i],o=u.qa;o||(n.J=u.wa||u.oa.W,u.ia?(n.aa=Mr(u.ia),o=function(a){return function(h,x,A){return a.J(h,x,A,a.aa)}}(n)):u.ka?(n.Z=Ar(u.da.P,u.ka),o=function(a){return function(h,x,A){return a.J(h,x,A,a.Z)}}(n)):o=n.J,u.qa=o),o(e,t,u.da),n={J:n.J,aa:n.aa,Z:n.Z}}}vn(e,t)}var Qt=Symbol();function mr(t,e,r){return t[Qt]||(t[Qt]=function(n,i){return e(n,i,r)})}function gr(t){var e=t[Qt];if(!e){var r=xe(t);e=function(n,i){return br(n,i,r)},t[Qt]=e}return e}function xn(t){var e=t.ia;if(e)return gr(e);if(e=t.va)return mr(t.da.P,e,t.ka)}function Mn(t){var e=xn(t),r=t.da,n=t.oa.U;return e?function(i,u){return n(i,u,r,e)}:function(i,u){return n(i,u,r)}}function wr(t,e){var r=t[e];return typeof r=="function"&&r.length===0&&(r=r(),t[e]=r),Array.isArray(r)&&(Ht in r||Bt in r||0<r.length&&typeof r[0]=="function")?r:void 0}function xr(t,e,r,n,i,u){e.P=t[0];var o=1;if(t.length>o&&typeof t[o]!="number"){var a=t[o++];r(e,a)}for(;o<t.length;){r=t[o++];for(var h=o+1;h<t.length&&typeof t[h]!="number";)h++;switch(a=t[o++],h-=o,h){case 0:n(e,r,a);break;case 1:(h=wr(t,o))?(o++,i(e,r,a,h)):n(e,r,a,t[o++]);break;case 2:h=o++,h=wr(t,h),i(e,r,a,h,t[o++]);break;case 3:u(e,r,a,t[o++],t[o++],t[o++]);break;case 4:u(e,r,a,t[o++],t[o++],t[o++],t[o++]);break;default:throw Error("unexpected number of binary field arguments: "+h)}}return e}var Jt=Symbol();function Mr(t){var e=t[Jt];if(!e){var r=we(t);e=function(n,i){return _r(n,i,r)},t[Jt]=e}return e}function Ar(t,e){var r=t[Jt];return r||(r=function(n,i){return yr(n,i,e)},t[Jt]=r),r}var Bt=Symbol();function An(t,e){t.push(e)}function bn(t,e,r){t.push(e,r.W)}function _n(t,e,r,n){var i=Mr(n),u=we(n).P,o=r.W;t.push(e,function(a,h,x){return o(a,h,x,u,i)})}function Sn(t,e,r,n,i,u){var o=Ar(n,u),a=r.W;t.push(e,function(h,x,A){return a(h,x,A,n,o)})}function we(t){var e=t[Bt];return e||(e=xr(t,t[Bt]=[],An,bn,_n,Sn),Ht in t&&Bt in t&&(t.length=0),e)}var Ht=Symbol();function jn(t,e){t[0]=e}function Tn(t,e,r,n){var i=r.U;t[e]=n?function(u,o,a){return i(u,o,a,n)}:i}function En(t,e,r,n,i){var u=r.U,o=gr(n),a=xe(n).P;t[e]=function(h,x,A){return u(h,x,A,a,o,i)}}function On(t,e,r,n,i,u,o){var a=r.U,h=mr(n,i,u);t[e]=function(x,A,E){return a(x,A,E,n,h,o)}}function xe(t){var e=t[Ht];return e||(e=xr(t,t[Ht]={},jn,Tn,En,On),Ht in t&&Bt in t&&(t.length=0),e)}function br(t,e,r){for(;ir(e)&&e.i!=4;){var n=e.l,i=r[n];if(!i){var u=r[0];u&&(u=u[n])&&(i=r[n]=Mn(u))}if(!i||!i(e,t,n)){i=e,n=t,u=i.j,Yt(i);var o=i;if(!o.ca){if(i=o.h.h-u,o.h.h=u,o=o.h,i==0)i=se();else{if(u=er(o,i),o.S&&o.m)i=o.i.subarray(u,u+i);else{o=o.i;var a=u;i=u+i,i=a===i?oe():ln?o.slice(a,i):new Uint8Array(o.subarray(a,i))}i=i.length==0?se():new Nt(i,kt)}(u=n.R)?u.push(i):n.R=[i]}}}return t}function _r(t,e,r){for(var n=r.length,i=n%2==1,u=i?1:0;u<n;u+=2)(0,r[u+1])(e,t,r[u]);yr(t,e,i?r[0]:void 0)}function zt(t,e){return{U:t,W:e}}var ht=zt(function(t,e,r){if(t.i!==5)return!1;t=t.h;var n=t.i,i=t.h,u=n[i],o=n[i+1],a=n[i+2];return n=n[i+3],bt(t,t.h+4),o=(u<<0|o<<8|a<<16|n<<24)>>>0,t=2*(o>>31)+1,u=o>>>23&255,o&=8388607,pt(e,r,u==255?o?NaN:1/0*t:u==0?t*Math.pow(2,-149)*o:t*Math.pow(2,u-150)*(o+Math.pow(2,23))),!0},function(t,e,r){if(e=me(e,r),e!=null){_t(t.h,8*r+5),t=t.h;var n=+e;n===0?0<1/n?Z=et=0:(et=0,Z=2147483648):isNaN(n)?(et=0,Z=2147483647):(n=(r=0>n?-2147483648:0)?-n:n,34028234663852886e22<n?(et=0,Z=(r|2139095040)>>>0):11754943508222875e-54>n?(n=Math.round(n/Math.pow(2,-149)),et=0,Z=(r|n)>>>0):(e=Math.floor(Math.log(n)/Math.LN2),n*=Math.pow(2,-e),n=Math.round(8388608*n),16777216<=n&&++e,et=0,Z=(r|e+127<<23|n&8388607)>>>0)),r=Z,t.h.push(r>>>0&255),t.h.push(r>>>8&255),t.h.push(r>>>16&255),t.h.push(r>>>24&255)}}),Cn=zt(function(t,e,r){if(t.i!==0)return!1;var n=t.h,i=0,u=t=0,o=n.i,a=n.h;do{var h=o[a++];i|=(h&127)<<u,u+=7}while(32>u&&h&128);for(32<u&&(t|=(h&127)>>4),u=3;32>u&&h&128;u+=7)h=o[a++],t|=(h&127)<<u;if(bt(n,a),128>h)n=i>>>0,h=t>>>0,(t=h&2147483648)&&(n=~n+1>>>0,h=~h>>>0,n==0&&(h=h+1>>>0)),n=4294967296*h+(n>>>0);else throw ue();return pt(e,r,t?-n:n),!0},function(t,e,r){e=lt(e,r),e!=null&&(typeof e=="string"&&Ge(e),e!=null&&(_t(t.h,8*r),typeof e=="number"?(t=t.h,De(e),nr(t,Z,et)):(r=Ge(e),nr(t.h,r.i,r.h))))}),In=zt(function(t,e,r){return t.i!==0?!1:(pt(e,r,Pt(t.h)),!0)},function(t,e,r){if(e=lt(e,r),e!=null&&e!=null)if(_t(t.h,8*r),t=t.h,r=e,0<=r)_t(t,r);else{for(e=0;9>e;e++)t.h.push(r&127|128),r>>=7;t.h.push(1)}}),Sr=zt(function(t,e,r){if(t.i!==2)return!1;var n=Pt(t.h)>>>0;t=t.h;var i=er(t,n);if(t=t.i,fn){var u=t,o;(o=ae)||(o=ae=new TextDecoder("utf-8",{fatal:!0})),t=i+n,u=i===0&&t===u.length?u:u.subarray(i,t);try{var a=o.decode(u)}catch(E){if(Vt===void 0){try{o.decode(new Uint8Array([128]))}catch{}try{o.decode(new Uint8Array([97])),Vt=!0}catch{Vt=!1}}throw!Vt&&(ae=void 0),E}}else{a=i,n=a+n,i=[];for(var h=null,x,A;a<n;)x=t[a++],128>x?i.push(x):224>x?a>=n?At():(A=t[a++],194>x||(A&192)!==128?(a--,At()):i.push((x&31)<<6|A&63)):240>x?a>=n-1?At():(A=t[a++],(A&192)!==128||x===224&&160>A||x===237&&160<=A||((u=t[a++])&192)!==128?(a--,At()):i.push((x&15)<<12|(A&63)<<6|u&63)):244>=x?a>=n-2?At():(A=t[a++],(A&192)!==128||(x<<28)+(A-144)>>30!==0||((u=t[a++])&192)!==128||((o=t[a++])&192)!==128?(a--,At()):(x=(x&7)<<18|(A&63)<<12|(u&63)<<6|o&63,x-=65536,i.push((x>>10&1023)+55296,(x&1023)+56320))):At(),8192<=i.length&&(h=Ze(h,i),i.length=0);a=Ze(h,i)}return pt(e,r,a),!0},function(t,e,r){if(e=lt(e,r),e!=null){var n=!1;if(n=n===void 0?!1:n,cn){if(n&&/(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])/.test(e))throw Error("Found an unpaired surrogate");e=($e||($e=new TextEncoder)).encode(e)}else{for(var i=0,u=new Uint8Array(3*e.length),o=0;o<e.length;o++){var a=e.charCodeAt(o);if(128>a)u[i++]=a;else{if(2048>a)u[i++]=a>>6|192;else{if(55296<=a&&57343>=a){if(56319>=a&&o<e.length){var h=e.charCodeAt(++o);if(56320<=h&&57343>=h){a=1024*(a-55296)+h-56320+65536,u[i++]=a>>18|240,u[i++]=a>>12&63|128,u[i++]=a>>6&63|128,u[i++]=a&63|128;continue}else o--}if(n)throw Error("Found an unpaired surrogate");a=65533}u[i++]=a>>12|224,u[i++]=a>>6&63|128}u[i++]=a&63|128}}e=i===u.length?u:u.subarray(0,i)}_t(t.h,8*r+2),_t(t.h,e.length),Ot(t,t.h.end()),Ot(t,e)}}),jr=zt(function(t,e,r,n,i){if(t.i!==2)return!1;e=lr(e,r,n),r=t.h.j,n=Pt(t.h)>>>0;var u=t.h.h+n,o=u-r;if(0>=o&&(t.h.j=u,i(e,t,void 0,void 0,void 0),o=u-t.h.h),o)throw Error("Message parsing ended unexpectedly. Expected to read "+(n+" bytes, instead read "+(n-o)+" bytes, either the data ended unexpectedly or the message misreported its own length"));return t.h.h=u,t.h.j=r,!0},function(t,e,r,n,i){if(e=Kt(e,n,r),e!=null)for(n=0;n<e.length;n++){var u=t;_t(u.h,8*r+2);var o=u.h.end();Ot(u,o),o.push(u.i),u=o,i(e[n],t),o=t;var a=u.pop();for(a=o.i+o.h.length()-a;127<a;)u.push(a&127|128),a>>>=7,o.i++;u.push(a),o.i++}});function Me(t){return function(e,r){t:{if(Gt.length){var n=Gt.pop();n.setOptions(r),le(n.h,e,r),e=n}else e=new fe(e,r);try{var i=xe(t),u=br(new i.P,e,i);break t}finally{i=e.h,i.i=null,i.m=!1,i.l=0,i.j=0,i.h=0,i.S=!1,e.l=-1,e.i=-1,100>Gt.length&&Gt.push(e)}u=void 0}return u}}function Ae(t){return function(){var e=new pn;_r(this,e,we(t)),Ot(e,e.h.end());for(var r=new Uint8Array(e.i),n=e.j,i=n.length,u=0,o=0;o<i;o++){var a=n[o];r.set(a,u),u+=a.length}return e.j=[r],r}}function Ct(t){nt.call(this,t)}L(Ct,nt);var Tr=[Ct,1,In,2,ht,3,Sr,4,Sr];Ct.prototype.l=Ae(Tr);function be(t){nt.call(this,t,-1,Fn)}L(be,nt),be.prototype.addClassification=function(t,e){return lr(this,1,Ct,t,e),this};var Fn=[1],Er=Me([be,1,jr,Tr]);function It(t){nt.call(this,t)}L(It,nt);var Or=[It,1,ht,2,ht,3,ht,4,ht,5,ht];It.prototype.l=Ae(Or);function Cr(t){nt.call(this,t,-1,Rn)}L(Cr,nt);var Rn=[1],Ir=Me([Cr,1,jr,Or]);function qt(t){nt.call(this,t)}L(qt,nt);var Fr=[qt,1,ht,2,ht,3,ht,4,ht,5,ht,6,Cn],kn=Me(Fr);qt.prototype.l=Ae(Fr);function Rr(t,e,r){if(r=t.createShader(r===0?t.VERTEX_SHADER:t.FRAGMENT_SHADER),t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw Error(`Could not compile WebGL shader.

`+t.getShaderInfoLog(r));return r}function kr(t){return Kt(t,Ct,1).map(function(e){var r=lt(e,1);return{index:r??0,score:yt(e,2),label:lt(e,3)!=null?Zt(lt(e,3),""):void 0,displayName:lt(e,4)!=null?Zt(lt(e,4),""):void 0}})}function Nr(t){return{x:yt(t,1),y:yt(t,2),z:yt(t,3),visibility:me(t,4)!=null?yt(t,4):void 0}}function Pr(t){return t.map(function(e){return Kt(Ir(e),It,1).map(Nr)})}function _e(t,e){this.i=t,this.h=e,this.m=0}function Lr(t,e,r){return Nn(t,e),typeof t.h.canvas.transferToImageBitmap=="function"?Promise.resolve(t.h.canvas.transferToImageBitmap()):r?Promise.resolve(t.h.canvas):typeof createImageBitmap=="function"?createImageBitmap(t.h.canvas):(t.j===void 0&&(t.j=document.createElement("canvas")),new Promise(function(n){t.j.height=t.h.canvas.height,t.j.width=t.h.canvas.width,t.j.getContext("2d",{}).drawImage(t.h.canvas,0,0,t.h.canvas.width,t.h.canvas.height),n(t.j)}))}function Nn(t,e){var r=t.h;if(t.s===void 0){var n=Rr(r,`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,0),i=Rr(r,`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D sampler0;
  void main(){
    gl_FragColor = texture2D(sampler0, vTex);
  }`,1),u=r.createProgram();if(r.attachShader(u,n),r.attachShader(u,i),r.linkProgram(u),!r.getProgramParameter(u,r.LINK_STATUS))throw Error(`Could not compile WebGL program.

`+r.getProgramInfoLog(u));n=t.s=u,r.useProgram(n),i=r.getUniformLocation(n,"sampler0"),t.l={O:r.getAttribLocation(n,"aVertex"),N:r.getAttribLocation(n,"aTex"),xa:i},t.v=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.v),r.enableVertexAttribArray(t.l.O),r.vertexAttribPointer(t.l.O,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),t.u=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,t.u),r.enableVertexAttribArray(t.l.N),r.vertexAttribPointer(t.l.N,2,r.FLOAT,!1,0,0),r.bufferData(r.ARRAY_BUFFER,new Float32Array([0,1,0,0,1,0,1,1]),r.STATIC_DRAW),r.bindBuffer(r.ARRAY_BUFFER,null),r.uniform1i(i,0)}n=t.l,r.useProgram(t.s),r.canvas.width=e.width,r.canvas.height=e.height,r.viewport(0,0,e.width,e.height),r.activeTexture(r.TEXTURE0),t.i.bindTexture2d(e.glName),r.enableVertexAttribArray(n.O),r.bindBuffer(r.ARRAY_BUFFER,t.v),r.vertexAttribPointer(n.O,2,r.FLOAT,!1,0,0),r.enableVertexAttribArray(n.N),r.bindBuffer(r.ARRAY_BUFFER,t.u),r.vertexAttribPointer(n.N,2,r.FLOAT,!1,0,0),r.bindFramebuffer(r.DRAW_FRAMEBUFFER?r.DRAW_FRAMEBUFFER:r.FRAMEBUFFER,null),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.colorMask(!0,!0,!0,!0),r.drawArrays(r.TRIANGLE_FAN,0,4),r.disableVertexAttribArray(n.O),r.disableVertexAttribArray(n.N),r.bindBuffer(r.ARRAY_BUFFER,null),t.i.bindTexture2d(0)}function Pn(t){this.h=t}var Ln=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,9,1,7,0,65,0,253,15,26,11]);function Un(t,e){return e+t}function Ur(t,e){window[t]=e}function Bn(t){var e=document.createElement("script");return e.setAttribute("src",t),e.setAttribute("crossorigin","anonymous"),new Promise(function(r){e.addEventListener("load",function(){r()},!1),e.addEventListener("error",function(){r()},!1),document.body.appendChild(e)})}function Hn(){return R(function(t){switch(t.h){case 1:return t.s=2,C(t,WebAssembly.instantiate(Ln),4);case 4:t.h=3,t.s=0;break;case 2:return t.s=0,t.l=null,t.return(!1);case 3:return t.return(!0)}})}function Se(t){if(this.h=t,this.listeners={},this.l={},this.L={},this.s={},this.v={},this.M=this.u=this.ga=!0,this.I=Promise.resolve(),this.fa="",this.D={},this.locateFile=t&&t.locateFile||Un,typeof window=="object")var e=window.location.pathname.toString().substring(0,window.location.pathname.toString().lastIndexOf("/"))+"/";else if(typeof location<"u")e=location.pathname.toString().substring(0,location.pathname.toString().lastIndexOf("/"))+"/";else throw Error("solutions can only be loaded on a web page or in a web worker");if(this.ha=e,t.options){e=g(Object.keys(t.options));for(var r=e.next();!r.done;r=e.next()){r=r.value;var n=t.options[r].default;n!==void 0&&(this.l[r]=typeof n=="function"?n():n)}}}l=Se.prototype,l.close=function(){return this.j&&this.j.delete(),Promise.resolve()};function zn(t){var e,r,n,i,u,o,a,h,x,A,E;return R(function(T){switch(T.h){case 1:return t.ga?(e=t.h.files===void 0?[]:typeof t.h.files=="function"?t.h.files(t.l):t.h.files,C(T,Hn(),2)):T.return();case 2:if(r=T.i,typeof window=="object")return Ur("createMediapipeSolutionsWasm",{locateFile:t.locateFile}),Ur("createMediapipeSolutionsPackedAssets",{locateFile:t.locateFile}),o=e.filter(function(b){return b.data!==void 0}),a=e.filter(function(b){return b.data===void 0}),h=Promise.all(o.map(function(b){var O=te(t,b.url);if(b.path!==void 0){var P=b.path;O=O.then(function(W){return t.overrideFile(P,W),Promise.resolve(W)})}return O})),x=Promise.all(a.map(function(b){return b.simd===void 0||b.simd&&r||!b.simd&&!r?Bn(t.locateFile(b.url,t.ha)):Promise.resolve()})).then(function(){var b,O,P;return R(function(W){if(W.h==1)return b=window.createMediapipeSolutionsWasm,O=window.createMediapipeSolutionsPackedAssets,P=t,C(W,b(O),2);P.i=W.i,W.h=0})}),A=function(){return R(function(b){return t.h.graph&&t.h.graph.url?b=C(b,te(t,t.h.graph.url),0):(b.h=0,b=void 0),b})}(),C(T,Promise.all([x,h,A]),7);if(typeof importScripts!="function")throw Error("solutions can only be loaded on a web page or in a web worker");return n=e.filter(function(b){return b.simd===void 0||b.simd&&r||!b.simd&&!r}).map(function(b){return t.locateFile(b.url,t.ha)}),importScripts.apply(null,v(n)),i=t,C(T,createMediapipeSolutionsWasm(Module),6);case 6:i.i=T.i,t.m=new OffscreenCanvas(1,1),t.i.canvas=t.m,u=t.i.GL.createContext(t.m,{antialias:!1,alpha:!1,ua:typeof WebGL2RenderingContext<"u"?2:1}),t.i.GL.makeContextCurrent(u),T.h=4;break;case 7:if(t.m=document.createElement("canvas"),E=t.m.getContext("webgl2",{}),!E&&(E=t.m.getContext("webgl",{}),!E))return alert("Failed to create WebGL canvas context when passing video frame."),T.return();t.K=E,t.i.canvas=t.m,t.i.createContext(t.m,!0,!0,{});case 4:t.j=new t.i.SolutionWasm,t.ga=!1,T.h=0}})}function Dn(t){var e,r,n,i,u,o,a,h;return R(function(x){if(x.h==1){if(t.h.graph&&t.h.graph.url&&t.fa===t.h.graph.url)return x.return();if(t.u=!0,!t.h.graph||!t.h.graph.url){x.h=2;return}return t.fa=t.h.graph.url,C(x,te(t,t.h.graph.url),3)}for(x.h!=2&&(e=x.i,t.j.loadGraph(e)),r=g(Object.keys(t.D)),n=r.next();!n.done;n=r.next())i=n.value,t.j.overrideFile(i,t.D[i]);if(t.D={},t.h.listeners)for(u=g(t.h.listeners),o=u.next();!o.done;o=u.next())a=o.value,Wn(t,a);h=t.l,t.l={},t.setOptions(h),x.h=0})}l.reset=function(){var t=this;return R(function(e){t.j&&(t.j.reset(),t.s={},t.v={}),e.h=0})},l.setOptions=function(t,e){var r=this;if(e=e||this.h.options){for(var n=[],i=[],u={},o=g(Object.keys(t)),a=o.next();!a.done;u={X:u.X,Y:u.Y},a=o.next())if(a=a.value,!(a in this.l&&this.l[a]===t[a])){this.l[a]=t[a];var h=e[a];h!==void 0&&(h.onChange&&(u.X=h.onChange,u.Y=t[a],n.push(function(x){return function(){var A;return R(function(E){if(E.h==1)return C(E,x.X(x.Y),2);A=E.i,A===!0&&(r.u=!0),E.h=0})}}(u))),h.graphOptionXref&&(a=Object.assign({},{calculatorName:"",calculatorIndex:0},h.graphOptionXref,{valueNumber:h.type===1?t[a]:0,valueBoolean:h.type===0?t[a]:!1,valueString:h.type===2?t[a]:""}),i.push(a)))}(n.length!==0||i.length!==0)&&(this.u=!0,this.H=(this.H===void 0?[]:this.H).concat(i),this.F=(this.F===void 0?[]:this.F).concat(n))}};function Vn(t){var e,r,n,i,u,o,a;return R(function(h){switch(h.h){case 1:if(!t.u)return h.return();if(!t.F){h.h=2;break}e=g(t.F),r=e.next();case 3:if(r.done){h.h=5;break}return n=r.value,C(h,n(),4);case 4:r=e.next(),h.h=3;break;case 5:t.F=void 0;case 2:if(t.H){for(i=new t.i.GraphOptionChangeRequestList,u=g(t.H),o=u.next();!o.done;o=u.next())a=o.value,i.push_back(a);t.j.changeOptions(i),i.delete(),t.H=void 0}t.u=!1,h.h=0}})}l.initialize=function(){var t=this;return R(function(e){return e.h==1?C(e,zn(t),2):e.h!=3?C(e,Dn(t),3):C(e,Vn(t),0)})};function te(t,e){var r,n;return R(function(i){return e in t.L?i.return(t.L[e]):(r=t.locateFile(e,""),n=fetch(r).then(function(u){return u.arrayBuffer()}),t.L[e]=n,i.return(n))})}l.overrideFile=function(t,e){this.j?this.j.overrideFile(t,e):this.D[t]=e},l.clearOverriddenFiles=function(){this.D={},this.j&&this.j.clearOverriddenFiles()},l.send=function(t,e){var r=this,n,i,u,o,a,h,x,A,E;return R(function(T){switch(T.h){case 1:return r.h.inputs?(n=1e3*(e??performance.now()),C(T,r.I,2)):T.return();case 2:return C(T,r.initialize(),3);case 3:for(i=new r.i.PacketDataList,u=g(Object.keys(t)),o=u.next();!o.done;o=u.next())if(a=o.value,h=r.h.inputs[a]){t:{var b=t[a];switch(h.type){case"video":var O=r.s[h.stream];if(O||(O=new _e(r.i,r.K),r.s[h.stream]=O),O.m===0&&(O.m=O.i.createTexture()),typeof HTMLVideoElement<"u"&&b instanceof HTMLVideoElement)var P=b.videoWidth,W=b.videoHeight;else typeof HTMLImageElement<"u"&&b instanceof HTMLImageElement?(P=b.naturalWidth,W=b.naturalHeight):(P=b.width,W=b.height);W={glName:O.m,width:P,height:W},P=O.h,P.canvas.width=W.width,P.canvas.height=W.height,P.activeTexture(P.TEXTURE0),O.i.bindTexture2d(O.m),P.texImage2D(P.TEXTURE_2D,0,P.RGBA,P.RGBA,P.UNSIGNED_BYTE,b),O.i.bindTexture2d(0),O=W;break t;case"detections":for(O=r.s[h.stream],O||(O=new Pn(r.i),r.s[h.stream]=O),O.data||(O.data=new O.h.DetectionListData),O.data.reset(b.length),W=0;W<b.length;++W){P=b[W];var G=O.data,Q=G.setBoundingBox,ut=W,it=P.la,D=new qt;if(vt(D,1,it.ra),vt(D,2,it.sa),vt(D,3,it.height),vt(D,4,it.width),vt(D,5,it.rotation),pt(D,6,it.pa),it=D.l(),Q.call(G,ut,it),P.ea)for(G=0;G<P.ea.length;++G){D=P.ea[G],Q=O.data,ut=Q.addNormalizedLandmark,it=W,D=Object.assign({},D,{visibility:D.visibility?D.visibility:0});var J=new It;vt(J,1,D.x),vt(J,2,D.y),vt(J,3,D.z),D.visibility&&vt(J,4,D.visibility),D=J.l(),ut.call(Q,it,D)}if(P.ba)for(G=0;G<P.ba.length;++G)Q=O.data,ut=Q.addClassification,it=W,D=P.ba[G],J=new Ct,vt(J,2,D.score),D.index&&pt(J,1,D.index),D.label&&pt(J,3,D.label),D.displayName&&pt(J,4,D.displayName),D=J.l(),ut.call(Q,it,D)}O=O.data;break t;default:O={}}}switch(x=O,A=h.stream,h.type){case"video":i.pushTexture2d(Object.assign({},x,{stream:A,timestamp:n}));break;case"detections":E=x,E.stream=A,E.timestamp=n,i.pushDetectionList(E);break;default:throw Error("Unknown input config type: '"+h.type+"'")}}return r.j.send(i),C(T,r.I,4);case 4:i.delete(),T.h=0}})};function Yn(t,e,r){var n,i,u,o,a,h,x,A,E,T,b,O,P,W;return R(function(G){switch(G.h){case 1:if(!r)return G.return(e);for(n={},i=0,u=g(Object.keys(r)),o=u.next();!o.done;o=u.next())a=o.value,h=r[a],typeof h!="string"&&h.type==="texture"&&e[h.stream]!==void 0&&++i;1<i&&(t.M=!1),x=g(Object.keys(r)),o=x.next();case 2:if(o.done){G.h=4;break}if(A=o.value,E=r[A],typeof E=="string")return P=n,W=A,C(G,Gn(t,A,e[E]),14);if(T=e[E.stream],E.type==="detection_list"){if(T){for(var Q=T.getRectList(),ut=T.getLandmarksList(),it=T.getClassificationsList(),D=[],J=0;J<Q.size();++J){var Mt=kn(Q.get(J)),Xn=yt(Mt,1),Kn=yt(Mt,2),Zn=yt(Mt,3),$n=yt(Mt,4),Qn=yt(Mt,5,0),ee=void 0;ee=ee===void 0?0:ee,Mt={la:{ra:Xn,sa:Kn,height:Zn,width:$n,rotation:Qn,pa:Zt(lt(Mt,6),ee)},ea:Kt(Ir(ut.get(J)),It,1).map(Nr),ba:kr(Er(it.get(J)))},D.push(Mt)}Q=D}else Q=[];n[A]=Q,G.h=7;break}if(E.type==="proto_list"){if(T){for(Q=Array(T.size()),ut=0;ut<T.size();ut++)Q[ut]=T.get(ut);T.delete()}else Q=[];n[A]=Q,G.h=7;break}if(T===void 0){G.h=3;break}if(E.type==="float_list"){n[A]=T,G.h=7;break}if(E.type==="proto"){n[A]=T,G.h=7;break}if(E.type!=="texture")throw Error("Unknown output config type: '"+E.type+"'");return b=t.v[A],b||(b=new _e(t.i,t.K),t.v[A]=b),C(G,Lr(b,T,t.M),13);case 13:O=G.i,n[A]=O;case 7:E.transform&&n[A]&&(n[A]=E.transform(n[A])),G.h=3;break;case 14:P[W]=G.i;case 3:o=x.next(),G.h=2;break;case 4:return G.return(n)}})}function Gn(t,e,r){var n;return R(function(i){return typeof r=="number"||r instanceof Uint8Array||r instanceof t.i.Uint8BlobList?i.return(r):r instanceof t.i.Texture2dDataOut?(n=t.v[e],n||(n=new _e(t.i,t.K),t.v[e]=n),i.return(Lr(n,r,t.M))):i.return(void 0)})}function Wn(t,e){for(var r=e.name||"$",n=[].concat(v(e.wants)),i=new t.i.StringList,u=g(e.wants),o=u.next();!o.done;o=u.next())i.push_back(o.value);u=t.i.PacketListener.implement({onResults:function(a){for(var h={},x=0;x<e.wants.length;++x)h[n[x]]=a.get(x);var A=t.listeners[r];A&&(t.I=Yn(t,h,e.outs).then(function(E){E=A(E);for(var T=0;T<e.wants.length;++T){var b=h[n[T]];typeof b=="object"&&b.hasOwnProperty&&b.hasOwnProperty("delete")&&b.delete()}E&&(t.I=E)}))}}),t.j.attachMultiListener(i,u),i.delete()}l.onResults=function(t,e){this.listeners[e||"$"]=t},$("Solution",Se),$("OptionType",{BOOL:0,NUMBER:1,ta:2,0:"BOOL",1:"NUMBER",2:"STRING"});function Br(t){return t===void 0&&(t=0),t===1?"hand_landmark_full.tflite":"hand_landmark_lite.tflite"}function Hr(t){var e=this;t=t||{},this.h=new Se({locateFile:t.locateFile,files:function(r){return[{url:"hands_solution_packed_assets_loader.js"},{simd:!1,url:"hands_solution_wasm_bin.js"},{simd:!0,url:"hands_solution_simd_wasm_bin.js"},{data:!0,url:Br(r.modelComplexity)}]},graph:{url:"hands.binarypb"},inputs:{image:{type:"video",stream:"input_frames_gpu"}},listeners:[{wants:["multi_hand_landmarks","multi_hand_world_landmarks","image_transformed","multi_handedness"],outs:{image:"image_transformed",multiHandLandmarks:{type:"proto_list",stream:"multi_hand_landmarks",transform:Pr},multiHandWorldLandmarks:{type:"proto_list",stream:"multi_hand_world_landmarks",transform:Pr},multiHandedness:{type:"proto_list",stream:"multi_handedness",transform:function(r){return r.map(function(n){return kr(Er(n))[0]})}}}}],options:{useCpuInference:{type:0,graphOptionXref:{calculatorType:"InferenceCalculator",fieldName:"use_cpu_inference"},default:typeof window!="object"||window.navigator===void 0?!1:"iPad Simulator;iPhone Simulator;iPod Simulator;iPad;iPhone;iPod".split(";").includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},selfieMode:{type:0,graphOptionXref:{calculatorType:"GlScalerCalculator",calculatorIndex:1,fieldName:"flip_horizontal"}},maxNumHands:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculator",fieldName:"int_value"}},modelComplexity:{type:1,graphOptionXref:{calculatorType:"ConstantSidePacketCalculator",calculatorName:"ConstantSidePacketCalculatorModelComplexity",fieldName:"int_value"},onChange:function(r){var n,i,u;return R(function(o){return o.h==1?(n=Br(r),i="third_party/mediapipe/modules/hand_landmark/"+n,C(o,te(e.h,n),2)):(u=o.i,e.h.overrideFile(i,u),o.return(!0))})}},minDetectionConfidence:{type:1,graphOptionXref:{calculatorType:"TensorsToDetectionsCalculator",calculatorName:"handlandmarktrackinggpu__palmdetectiongpu__TensorsToDetectionsCalculator",fieldName:"min_score_thresh"}},minTrackingConfidence:{type:1,graphOptionXref:{calculatorType:"ThresholdingCalculator",calculatorName:"handlandmarktrackinggpu__handlandmarkgpu__ThresholdingCalculator",fieldName:"threshold"}}}})}l=Hr.prototype,l.close=function(){return this.h.close(),Promise.resolve()},l.onResults=function(t){this.h.onResults(t)},l.initialize=function(){var t=this;return R(function(e){return C(e,t.h.initialize(),0)})},l.reset=function(){this.h.reset()},l.send=function(t){var e=this;return R(function(r){return C(r,e.h.send(t),0)})},l.setOptions=function(t){this.h.setOptions(t)},$("Hands",Hr),$("HAND_CONNECTIONS",[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[0,17],[17,18],[18,19],[19,20]]),$("VERSION","0.4.1675469240")}).call(je)),je}var ni=ri();/**
    * @license
    * Copyright 2023 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */var tt=function(){return tt=Object.assign||function(l){for(var f,c=1,p=arguments.length;c<p;c++)for(var s in f=arguments[c])Object.prototype.hasOwnProperty.call(f,s)&&(l[s]=f[s]);return l},tt.apply(this,arguments)};function ft(l,f,c,p){return new(c||(c=Promise))(function(s,d){function y(w){try{v(p.next(w))}catch(m){d(m)}}function g(w){try{v(p.throw(w))}catch(m){d(m)}}function v(w){var m;w.done?s(w.value):(m=w.value,m instanceof c?m:new c(function(M){M(m)})).then(y,g)}v((p=p.apply(l,[])).next())})}function ct(l,f){var c,p,s,d,y={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return d={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function g(v){return function(w){return function(m){if(c)throw new TypeError("Generator is already executing.");for(;d&&(d=0,m[0]&&(y=0)),y;)try{if(c=1,p&&(s=2&m[0]?p.return:m[0]?p.throw||((s=p.return)&&s.call(p),0):p.next)&&!(s=s.call(p,m[1])).done)return s;switch(p=0,s&&(m=[2&m[0],s.value]),m[0]){case 0:case 1:s=m;break;case 4:return y.label++,{value:m[1],done:!1};case 5:y.label++,p=m[1],m=[0];continue;case 7:m=y.ops.pop(),y.trys.pop();continue;default:if(s=y.trys,!((s=s.length>0&&s[s.length-1])||m[0]!==6&&m[0]!==2)){y=0;continue}if(m[0]===3&&(!s||m[1]>s[0]&&m[1]<s[3])){y.label=m[1];break}if(m[0]===6&&y.label<s[1]){y.label=s[1],s=m;break}if(s&&y.label<s[2]){y.label=s[2],y.ops.push(m);break}s[2]&&y.ops.pop(),y.trys.pop();continue}m=f.call(l,y)}catch(M){m=[6,M],p=0}finally{c=s=0}if(5&m[0])throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}([v,w])}}}var re=["wrist","thumb_cmc","thumb_mcp","thumb_ip","thumb_tip","index_finger_mcp","index_finger_pip","index_finger_dip","index_finger_tip","middle_finger_mcp","middle_finger_pip","middle_finger_dip","middle_finger_tip","ring_finger_mcp","ring_finger_pip","ring_finger_dip","ring_finger_tip","pinky_finger_mcp","pinky_finger_pip","pinky_finger_dip","pinky_finger_tip"],Te={runtime:"mediapipe",maxHands:2,modelType:"full"},ii=function(){function l(f){var c,p=this;this.width=0,this.height=0,this.selfieMode=!1,this.handsSolution=new ni.Hands({locateFile:function(s,d){return f.solutionPath?f.solutionPath.replace(/\/+$/,"")+"/"+s:d+"/"+s}}),f.modelType==="lite"?c=0:c=1,this.handsSolution.setOptions({modelComplexity:c,selfieMode:this.selfieMode,maxNumHands:f.maxHands}),this.handsSolution.onResults(function(s){if(p.height=s.image.height,p.width=s.image.width,p.hands=[],s.multiHandLandmarks!==null)for(var d=s.multiHandedness,y=s.multiHandLandmarks,g=s.multiHandWorldLandmarks,v=0;v<d.length;v++)p.hands.push(tt(tt({},p.translateOutput(y[v],g[v])),{score:d[v].score,handedness:d[v].label}))})}return l.prototype.translateOutput=function(f,c){var p=this;return{keypoints:f.map(function(s,d){return{x:s.x*p.width,y:s.y*p.height,score:s.visibility,name:re[d]}}),keypoints3D:c.map(function(s,d){return{x:s.x,y:s.y,z:s.z,score:s.visibility,name:re[d]}})}},l.prototype.estimateHands=function(f,c){return ft(this,void 0,void 0,function(){var p,s;return ct(this,function(d){switch(d.label){case 0:return c&&c.flipHorizontal&&c.flipHorizontal!==this.selfieMode&&(this.selfieMode=c.flipHorizontal,this.handsSolution.setOptions({selfieMode:this.selfieMode})),f instanceof ke?(s=ImageData.bind,[4,Jn(f)]):[3,2];case 1:return p=new(s.apply(ImageData,[void 0,d.sent(),f.shape[1],f.shape[0]])),[3,3];case 2:p=f,d.label=3;case 3:return f=p,[4,this.handsSolution.send({image:f})];case 4:return d.sent(),[2,this.hands]}})})},l.prototype.dispose=function(){this.handsSolution.close()},l.prototype.reset=function(){this.handsSolution.reset(),this.width=0,this.height=0,this.hands=null,this.selfieMode=!1},l.prototype.initialize=function(){return this.handsSolution.initialize()},l}();function oi(l){return ft(this,void 0,void 0,function(){var f,c;return ct(this,function(p){switch(p.label){case 0:return f=function(s){if(s==null)return tt({},Te);var d=tt({},s);return d.runtime="mediapipe",d.maxHands==null&&(d.maxHands=Te.maxHands),d.modelType==null&&(d.modelType=Te.modelType),d}(l),[4,(c=new ii(f)).initialize()];case 1:return p.sent(),[2,c]}})})}function Ee(l){return l.width*l.height}function Kr(l){var f=l.xCenter-l.width/2,c=f+l.width,p=l.yCenter-l.height/2;return{xMin:f,xMax:c,yMin:p,yMax:p+l.height,width:l.width,height:l.height}}function ui(l,f){var c=Kr(l),p=Kr(f);if(!function(y,g){return!(y.xMax<g.xMin||g.xMax<y.xMin||y.yMax<g.yMin||g.yMax<y.yMin)}(c,p))return 0;var s=Ee(function(y,g){var v=Math.max(y.xMin,g.xMin),w=Math.min(y.xMax,g.xMax),m=Math.max(y.yMin,g.yMin),M=Math.min(y.yMax,g.yMax);return{xMin:v,xMax:w,yMin:m,yMax:M,width:Math.max(w-v,0),height:Math.max(M-m,0)}}(c,p)),d=Ee(c)+Ee(p)-s;return d>0?s/d:0}function ai(l,f,c,p){var s=l.width,d=l.height,y=1,g=Math.cos(l.rotation),v=Math.sin(l.rotation),w=l.xCenter,m=l.yCenter,M=1/f,j=1/c,_=new Array(16);return _[0]=s*g*y*M,_[1]=-d*v*M,_[2]=0,_[3]=(-.5*s*g*y+.5*d*v+w)*M,_[4]=s*v*y*j,_[5]=d*g*j,_[6]=0,_[7]=(-.5*d*g-.5*s*v*y+m)*j,_[8]=0,_[9]=0,_[10]=s*M,_[11]=0,_[12]=0,_[13]=0,_[14]=0,_[15]=1,function(S){if(S.length!==16)throw new Error("Array length must be 16 but got "+S.length);return[[S[0],S[1],S[2],S[3]],[S[4],S[5],S[6],S[7]],[S[8],S[9],S[10],S[11]],[S[12],S[13],S[14],S[15]]]}(_)}function nn(l){return l instanceof ke?{height:l.shape[0],width:l.shape[1]}:{height:l.height,width:l.width}}function ne(l){return l-2*Math.PI*Math.floor((l+Math.PI)/(2*Math.PI))}function on(l){return l instanceof ke?l:qn(l)}function Oe(l,f){Wr(l.width!==0,function(){return f+" width cannot be 0."}),Wr(l.height!==0,function(){return f+" height cannot be 0."})}function si(l,f){var c=function(p,s,d,y){var g=s-p,v=y-d,w=v/g;return{scale:w,offset:d-p*w}}(0,255,f[0],f[1]);return Tt(function(){return jt(gt(l,c.scale),c.offset)})}function Zr(l,f,c){var p=f.outputTensorSize,s=f.keepAspectRatio,d=f.borderMode,y=f.outputTensorFloatRange,g=nn(l),v=function(j,_){return _?{xCenter:_.xCenter*j.width,yCenter:_.yCenter*j.height,width:_.width*j.width,height:_.height*j.height,rotation:_.rotation}:{xCenter:.5*j.width,yCenter:.5*j.height,width:j.width,height:j.height,rotation:0}}(g,c),w=function(j,_,S){if(S===void 0&&(S=!1),!S)return{top:0,left:0,right:0,bottom:0};var F=_.height,L=_.width;Oe(_,"targetSize"),Oe(j,"roi");var H,V,B=F/L,C=j.height/j.width,I=0,U=0;return B>C?(H=j.width,V=j.width*B,U=(1-C/B)/2):(H=j.height/B,V=j.height,I=(1-B/C)/2),j.width=H,j.height=V,{top:U,left:I,right:I,bottom:U}}(v,p,s),m=ai(v,g.width,g.height),M=Tt(function(){var j=on(l),_=rn(function(L,H,V){return Oe(V,"inputResolution"),[1/V.width*L[0][0]*H.width,1/V.height*L[0][1]*H.width,L[0][3]*H.width,1/V.width*L[1][0]*H.height,1/V.height*L[1][1]*H.height,L[1][3]*H.height,0,0]}(m,g,p),[1,8]),S=d==="zero"?"constant":"nearest",F=Re.transform(en(tn(j,"float32")),_,"bilinear",S,0,[p.height,p.width]);return y!=null?si(F,y):F});return{imageTensor:M,padding:w,transformationMatrix:m}}function $r(l,f,c,p){return p===1?.5*(l+f):l+(f-l)*c/(p-1)}function Qr(l){return{xCenter:l.xMin+l.width/2,yCenter:l.yMin+l.height/2,width:l.width,height:l.height}}function li(l){var f=l.relativeKeypoints;if(f.length<=1)throw new Error("2 or more keypoints required to calculate a rect.");var c=Number.MAX_VALUE,p=Number.MAX_VALUE,s=Number.MIN_VALUE,d=Number.MIN_VALUE;return f.forEach(function(y){c=Math.min(c,y.x),s=Math.max(s,y.x),p=Math.min(p,y.y),d=Math.max(d,y.y)}),{xCenter:(c+s)/2,yCenter:(p+d)/2,width:s-c,height:d-p}}function hi(l,f,c,p,s){var d=c==="rect"?function(y,g,v){var w,m=y.locationData;return w=Qr(m.boundingBox),w}(l):function(y,g){var v=y.locationData;return g==="boundingbox"?Qr(v.relativeBoundingBox):li(v)}(l,f);return s&&(d.rotation=function(y,g,v){var w,m=y.locationData,M=v.rotationVectorStartKeypointIndex,j=v.rotationVectorEndKeypointIndex;w=v.rotationVectorTargetAngle?v.rotationVectorTargetAngle:Math.PI*v.rotationVectorTargetAngleDegree/180;var _=m.relativeKeypoints[M].x*g.width,S=m.relativeKeypoints[M].y*g.height,F=m.relativeKeypoints[j].x*g.width,L=m.relativeKeypoints[j].y*g.height;return ne(w-Math.atan2(-(L-S),F-_))}(l,p,s)),d}function fi(l){return Tt(function(){var f=function(s){return Tt(function(){return[ot(s,[0,0,0],[1,-1,1]),ot(s,[0,0,1],[1,-1,-1])]})}(l),c=f[0],p=f[1];return{boxes:rt(p),logits:rt(c)}})}function ci(l,f,c,p){return ft(this,void 0,void 0,function(){var s,d,y,g,v;return ct(this,function(w){switch(w.label){case 0:return l.sort(function(m,M){return Math.max.apply(Math,M.score)-Math.max.apply(Math,m.score)}),s=rn(l.map(function(m){return[m.locationData.relativeBoundingBox.yMin,m.locationData.relativeBoundingBox.xMin,m.locationData.relativeBoundingBox.yMax,m.locationData.relativeBoundingBox.xMax]})),d=Dt(l.map(function(m){return m.score[0]})),[4,Re.nonMaxSuppressionAsync(s,d,f,c)];case 1:return[4,(y=w.sent()).array()];case 2:return g=w.sent(),v=l.filter(function(m,M){return g.indexOf(M)>-1}),wt([s,d,y]),[2,v]}})})}function di(l,f){return l.map(function(c){var p=tt(tt({},c),{x:c.x*f.width,y:c.y*f.height});return c.z!=null&&(p.z=c.z*f.width),p})}function pi(l,f,c){return ft(this,void 0,void 0,function(){var p,s,d,y,g;return ct(this,function(v){switch(v.label){case 0:return p=l[0],s=l[1],d=function(w,m,M){return Tt(function(){var j,_,S,F;M.reverseOutputOrder?(_=rt(ot(w,[0,M.boxCoordOffset+0],[-1,1])),j=rt(ot(w,[0,M.boxCoordOffset+1],[-1,1])),F=rt(ot(w,[0,M.boxCoordOffset+2],[-1,1])),S=rt(ot(w,[0,M.boxCoordOffset+3],[-1,1]))):(j=rt(ot(w,[0,M.boxCoordOffset+0],[-1,1])),_=rt(ot(w,[0,M.boxCoordOffset+1],[-1,1])),S=rt(ot(w,[0,M.boxCoordOffset+2],[-1,1])),F=rt(ot(w,[0,M.boxCoordOffset+3],[-1,1]))),_=jt(gt(at(_,M.xScale),m.w),m.x),j=jt(gt(at(j,M.yScale),m.h),m.y),M.applyExponentialOnBoxSize?(S=gt(Gr(at(S,M.hScale)),m.h),F=gt(Gr(at(F,M.wScale)),m.w)):(S=gt(at(S,M.hScale),m.h),F=gt(at(F,M.wScale),m.h));var L=Vr(j,at(S,2)),H=Vr(_,at(F,2)),V=jt(j,at(S,2)),B=jt(_,at(F,2)),C=Yr([Ft(L,[M.numBoxes,1]),Ft(H,[M.numBoxes,1]),Ft(V,[M.numBoxes,1]),Ft(B,[M.numBoxes,1])],1);if(M.numKeypoints)for(var I=0;I<M.numKeypoints;++I){var U=M.keypointCoordOffset+I*M.numValuesPerKeypoint,Y=void 0,z=void 0;M.reverseOutputOrder?(Y=rt(ot(w,[0,U],[-1,1])),z=rt(ot(w,[0,U+1],[-1,1]))):(z=rt(ot(w,[0,U],[-1,1])),Y=rt(ot(w,[0,U+1],[-1,1])));var k=jt(gt(at(Y,M.xScale),m.w),m.x),N=jt(gt(at(z,M.yScale),m.h),m.y);C=Yr([C,Ft(k,[M.numBoxes,1]),Ft(N,[M.numBoxes,1])],1)}return C})}(s,f,c),y=Tt(function(){var w=p;return c.sigmoidScore?(c.scoreClippingThresh!=null&&(w=ei(p,-c.scoreClippingThresh,c.scoreClippingThresh)),w=ti(w)):w}),[4,vi(d,y,c)];case 1:return g=v.sent(),wt([d,y]),[2,g]}})})}function vi(l,f,c){return ft(this,void 0,void 0,function(){var p,s,d,y,g,v,w,m,M,j,_,S;return ct(this,function(F){switch(F.label){case 0:return p=[],[4,l.data()];case 1:return s=F.sent(),[4,f.data()];case 2:for(d=F.sent(),y=0;y<c.numBoxes;++y)if(!(c.minScoreThresh!=null&&d[y]<c.minScoreThresh||(g=y*c.numCoords,v=yi(s[g+0],s[g+1],s[g+2],s[g+3],d[y],c.flipVertically,y),(w=v.locationData.relativeBoundingBox).width<0||w.height<0))){if(c.numKeypoints>0)for((m=v.locationData).relativeKeypoints=[],M=c.numKeypoints*c.numValuesPerKeypoint,j=0;j<M;j+=c.numValuesPerKeypoint)_=g+c.keypointCoordOffset+j,S={x:s[_+0],y:c.flipVertically?1-s[_+1]:s[_+1]},m.relativeKeypoints.push(S);p.push(v)}return[2,p]}})})}function yi(l,f,c,p,s,d,y){return{score:[s],ind:y,locationData:{relativeBoundingBox:{xMin:f,yMin:d?1-c:l,xMax:p,yMax:d?1-l:c,width:p-f,height:c-l}}}}function mi(l,f){return l==="none"?f:function(c){return 1/(1+Math.exp(-c))}(f)}function Jr(l,f,c,p){return ft(this,void 0,void 0,function(){var s,d,y,g,v,w,m,M;return ct(this,function(j){switch(j.label){case 0:return c=c||f.flipHorizontally||!1,p=p||f.flipVertically||!1,s=l.size,d=s/f.numLandmarks,[4,l.data()];case 1:for(y=j.sent(),g=[],v=0;v<f.numLandmarks;++v)w=v*d,(M={x:0,y:0}).x=c?f.inputImageWidth-y[w]:y[w],d>1&&(M.y=p?f.inputImageHeight-y[w+1]:y[w+1]),d>2&&(M.z=y[w+2]),d>3&&(M.score=mi(f.visibilityActivation,y[w+3])),g.push(M);for(m=0;m<g.length;++m)(M=g[m]).x=M.x/f.inputImageWidth,M.y=M.y/f.inputImageHeight,M.z=M.z/f.inputImageWidth/(f.normalizeZ||1);return[2,g]}})})}function qr(l,f,c){var p=l.width,s=l.height,d=l.rotation;if(c.rotation==null&&c.rotationDegree==null||(d=function(m,M){return M.rotation!=null?m+=M.rotation:M.rotationDegree!=null&&(m+=Math.PI*M.rotationDegree/180),ne(m)}(d,c)),d===0)l.xCenter=l.xCenter+p*c.shiftX,l.yCenter=l.yCenter+s*c.shiftY;else{var y=(f.width*p*c.shiftX*Math.cos(d)-f.height*s*c.shiftY*Math.sin(d))/f.width,g=(f.width*p*c.shiftX*Math.sin(d)+f.height*s*c.shiftY*Math.cos(d))/f.height;l.xCenter=l.xCenter+y,l.yCenter=l.yCenter+g}if(c.squareLong){var v=Math.max(p*f.width,s*f.height);p=v/f.width,s=v/f.height}else if(c.squareShort){var w=Math.min(p*f.width,s*f.height);p=w/f.width,s=w/f.height}return l.width=p*c.scaleX,l.height=s*c.scaleY,l}function gi(l,f){for(var c=function(R,q){var K=R[0].x*q.width,st=R[0].y*q.height,$=(R[4].x+R[8].x)/2,xt=(R[4].y+R[8].y)/2;return $=($+R[6].x)/2*q.width,xt=(xt+R[6].y)/2*q.height,ne(Math.PI/2-Math.atan2(-(xt-st),$-K))}(l,f),p=ne(-c),s=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,v=0,w=l;v<w.length;v++){var m=(L=w[v]).x,M=L.y;s=Math.min(s,m),d=Math.max(d,m),y=Math.min(y,M),g=Math.max(g,M)}var j=(d+s)/2,_=(g+y)/2;s=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY;for(var S=0,F=l;S<F.length;S++){var L,H=((L=F[S]).x-j)*f.width,V=(L.y-_)*f.height,B=H*Math.cos(p)-V*Math.sin(p),C=H*Math.sin(p)+V*Math.cos(p);s=Math.min(s,B),d=Math.max(d,B),y=Math.min(y,C),g=Math.max(g,C)}var I=(d+s)/2,U=(g+y)/2,Y=I*Math.cos(c)-U*Math.sin(c)+f.width*j,z=I*Math.sin(c)+U*Math.cos(c)+f.height*_,k=(d-s)/f.width,N=(g-y)/f.height;return{xCenter:Y/f.width,yCenter:z/f.height,width:k,height:N,rotation:c}}var wi={reduceBoxesInLowestLayer:!1,interpolatedScaleAspectRatio:1,featureMapHeight:[],featureMapWidth:[],numLayers:4,minScale:.1484375,maxScale:.75,inputSizeHeight:192,inputSizeWidth:192,anchorOffsetX:.5,anchorOffsetY:.5,strides:[8,16,16,16],aspectRatios:[1],fixedAnchorSize:!0},Ce={runtime:"tfjs",modelType:"full",maxHands:2,detectorModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1",landmarkModelUrl:"https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"},Ie={flipHorizontal:!1,staticImageMode:!1},xi={applyExponentialOnBoxSize:!1,flipVertically:!1,numBoxes:2016,numCoords:18,boxCoordOffset:0,keypointCoordOffset:4,numKeypoints:7,numValuesPerKeypoint:2,sigmoidScore:!0,scoreClippingThresh:100,reverseOutputOrder:!0,xScale:192,yScale:192,hScale:192,wScale:192,minScoreThresh:.5},Mi=.3,Ai={shiftX:0,shiftY:-.5,scaleX:2.6,scaleY:2.6,squareLong:!0},bi={shiftX:0,shiftY:-.1,scaleX:2,scaleY:2,squareLong:!0},_i={outputTensorSize:{width:192,height:192},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},Si={outputTensorSize:{width:224,height:224},keepAspectRatio:!0,outputTensorFloatRange:[0,1],borderMode:"zero"},ji={numLandmarks:21,inputImageWidth:224,inputImageHeight:224,normalizeZ:.4,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Ti={numLandmarks:21,inputImageWidth:1,inputImageHeight:1,visibilityActivation:"none",flipHorizontally:!1,flipVertically:!1},Fe,Ei=function(){function l(f,c,p){this.detectorModel=f,this.landmarkModel=c,this.maxHands=p,this.prevHandRectsFromLandmarks=null,this.anchors=function(v){v.reduceBoxesInLowestLayer==null&&(v.reduceBoxesInLowestLayer=!1),v.interpolatedScaleAspectRatio==null&&(v.interpolatedScaleAspectRatio=1),v.fixedAnchorSize==null&&(v.fixedAnchorSize=!1);for(var w=[],m=0;m<v.numLayers;){for(var M=[],j=[],_=[],S=[],F=m;F<v.strides.length&&v.strides[F]===v.strides[m];){var L=$r(v.minScale,v.maxScale,F,v.strides.length);if(F===0&&v.reduceBoxesInLowestLayer)_.push(1),_.push(2),_.push(.5),S.push(.1),S.push(L),S.push(L);else{for(var H=0;H<v.aspectRatios.length;++H)_.push(v.aspectRatios[H]),S.push(L);if(v.interpolatedScaleAspectRatio>0){var V=F===v.strides.length-1?1:$r(v.minScale,v.maxScale,F+1,v.strides.length);S.push(Math.sqrt(L*V)),_.push(v.interpolatedScaleAspectRatio)}}F++}for(var B=0;B<_.length;++B){var C=Math.sqrt(_[B]);M.push(S[B]/C),j.push(S[B]*C)}var I=0,U=0;if(v.featureMapHeight.length>0)I=v.featureMapHeight[m],U=v.featureMapWidth[m];else{var Y=v.strides[m];I=Math.ceil(v.inputSizeHeight/Y),U=Math.ceil(v.inputSizeWidth/Y)}for(var z=0;z<I;++z)for(var k=0;k<U;++k)for(var N=0;N<M.length;++N){var R={xCenter:(k+v.anchorOffsetX)/U,yCenter:(z+v.anchorOffsetY)/I,width:0,height:0};v.fixedAnchorSize?(R.width=1,R.height=1):(R.width=j[N],R.height=M[N]),w.push(R)}m=F}return w}(wi);var s=Dt(this.anchors.map(function(v){return v.width})),d=Dt(this.anchors.map(function(v){return v.height})),y=Dt(this.anchors.map(function(v){return v.xCenter})),g=Dt(this.anchors.map(function(v){return v.yCenter}));this.anchorTensor={x:y,y:g,w:s,h:d}}return l.prototype.estimateHands=function(f,c){return ft(this,void 0,void 0,function(){var p,s,d,y,g,v,w,m,M,j,_,S,F,L,H,V,B,C,I=this;return ct(this,function(U){switch(U.label){case 0:return p=function(k){if(k==null)return tt({},Ie);var N=tt({},k);return N.flipHorizontal==null&&(N.flipHorizontal=Ie.flipHorizontal),N.staticImageMode==null&&(N.staticImageMode=Ie.staticImageMode),N}(c),f==null?(this.reset(),[2,[]]):(s=nn(f),d=Tt(function(){var k=tn(on(f),"float32");return p.flipHorizontal&&(k=rt(Re.flipLeftRight(en(k,0)),[0])),k}),y=this.prevHandRectsFromLandmarks,p.staticImageMode||y==null||y.length<this.maxHands?[4,this.detectPalm(d)]:[3,2]);case 1:return(v=U.sent()).length===0?(this.reset(),d.dispose(),[2,[]]):(w=v.map(function(k){return I.palmDetectionToRoi(k,s)}),g=w,[3,3]);case 2:g=y,U.label=3;case 3:return Y=.5,z=[],[g].forEach(function(k){return k.forEach(function(N){(z=z.filter(function(R){return ui(N,R)<=Y})).push(N)})}),g=z,[4,Promise.all(g.map(function(k){return I.handLandmarks(k,d)}))];case 4:for(m=U.sent(),M=[],this.prevHandRectsFromLandmarks=[],j=0,_=m;j<_.length;j++)(S=_[j])!=null&&(F=S.landmarks,L=S.worldLandmarks,H=S.handScore,V=S.handedness,this.prevHandRectsFromLandmarks.push(this.handLandmarksToRoi(F,s)),(B=di(F,s))!=null&&B.forEach(function(k,N){delete k.z,k.name=re[N]}),(C=L)!=null&&C.forEach(function(k,N){k.name=re[N]}),M.push({keypoints:B,keypoints3D:C,handedness:V,score:H}));return d.dispose(),[2,M]}var Y,z})})},l.prototype.dispose=function(){this.detectorModel.dispose(),this.landmarkModel.dispose(),wt([this.anchorTensor.x,this.anchorTensor.y,this.anchorTensor.w,this.anchorTensor.h])},l.prototype.reset=function(){this.prevHandRectsFromLandmarks=null},l.prototype.detectPalm=function(f){return ft(this,void 0,void 0,function(){var c,p,s,d,y,g,v,w,m,M;return ct(this,function(j){switch(j.label){case 0:return c=Zr(f,_i),p=c.imageTensor,s=c.padding,d=this.detectorModel.predict(p),y=fi(d),g=y.boxes,[4,pi([v=y.logits,g],this.anchorTensor,xi)];case 1:return(w=j.sent()).length===0?(wt([p,d,v,g]),[2,w]):[4,ci(w,this.maxHands,Mi)];case 2:return m=j.sent(),M=function(_,S){_===void 0&&(_=[]);for(var F=S.left,L=S.top,H=S.left+S.right,V=S.top+S.bottom,B=0;B<_.length;B++){var C=_[B],I=C.locationData.relativeBoundingBox,U=(I.xMin-F)/(1-H),Y=(I.yMin-L)/(1-V),z=I.width/(1-H),k=I.height/(1-V);I.xMin=U,I.yMin=Y,I.width=z,I.height=k,I.xMax=U+z,I.yMax=Y+k;var N=C.locationData.relativeKeypoints;N&&N.forEach(function(R){var q=(R.x-F)/(1-H),K=(R.y-L)/(1-V);R.x=q,R.y=K})}return _}(m,s),wt([p,d,v,g]),[2,M]}})})},l.prototype.palmDetectionToRoi=function(f,c){return qr(hi(f,"boundingbox","normRect",c,{rotationVectorStartKeypointIndex:0,rotationVectorEndKeypointIndex:2,rotationVectorTargetAngleDegree:90}),c,Ai)},l.prototype.handLandmarks=function(f,c){return ft(this,void 0,void 0,function(){var p,s,d,y,g,v,w,m,M,j,_,S,F,L,H,V;return ct(this,function(B){switch(B.label){case 0:return p=Zr(c,Si,f),s=p.imageTensor,d=p.padding,y=this.landmarkModel.execute(s,["Identity_2:0","Identity_1:0","Identity:0","Identity_3:0"]),g=y[0],v=y[1],w=y[2],m=y[3],[4,v.data()];case 1:return(M=B.sent()[0])<.5?(wt(y),wt(s),[2,null]):[4,w.data()];case 2:return j=B.sent()[0],_=j>=.5?"Left":"Right",[4,Jr(g,ji)];case 3:return S=B.sent(),[4,Jr(m,Ti)];case 4:return F=B.sent(),L=function(C,I){var U=I.left,Y=I.top,z=I.left+I.right,k=I.top+I.bottom;return C.map(function(N){return tt(tt({},N),{x:(N.x-U)/(1-z),y:(N.y-Y)/(1-k),z:N.z/(1-z)})})}(S,d),H=function(C,I,U){U===void 0&&(U={ignoreRotation:!1});for(var Y=[],z=0,k=C;z<k.length;z++){var N=k[z],R=N.x-.5,q=N.y-.5,K=U.ignoreRotation?0:I.rotation,st=Math.cos(K)*R-Math.sin(K)*q,$=Math.sin(K)*R+Math.cos(K)*q;st=st*I.width+I.xCenter,$=$*I.height+I.yCenter;var xt=N.z*I.width,Et=tt({},N);Et.x=st,Et.y=$,Et.z=xt,Y.push(Et)}return Y}(L,f),V=function(C,I){for(var U=[],Y=0,z=C;Y<z.length;Y++){var k=z[Y],N=k.x,R=k.y,q=I.rotation,K=Math.cos(q)*N-Math.sin(q)*R,st=Math.sin(q)*N+Math.cos(q)*R,$=tt({},k);$.x=K,$.y=st,U.push($)}return U}(F,f),wt(y),wt(s),[2,{landmarks:H,worldLandmarks:V,handScore:M,handedness:_}]}})})},l.prototype.handLandmarksToRoi=function(f,c){return qr(gi([].concat(f.slice(0,4),f.slice(5,7),f.slice(9,11),f.slice(13,15),f.slice(17,19)),c),c,bi)},l}();function Oi(l){return ft(this,void 0,void 0,function(){var f,c,p,s,d,y;return ct(this,function(g){switch(g.label){case 0:return f=function(v){if(v==null)return tt({},Ce);var w=tt({},v);if(w.runtime="tfjs",w.maxHands==null&&(w.maxHands=Ce.maxHands),w.modelType==null&&(w.modelType=Ce.modelType),w.modelType!=="lite"&&w.modelType!=="full")throw new Error("Model type must be one of lite or full, but got "+w.modelType);return w.detectorModelUrl==null&&(w.modelType==="lite"?w.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/lite/1":w.detectorModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/detector/full/1"),w.landmarkModelUrl==null&&(w.modelType==="lite"?w.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/lite/1":w.landmarkModelUrl="https://tfhub.dev/mediapipe/tfjs-model/handpose_3d/landmark/full/1"),w}(l),c=f.detectorModelUrl.indexOf("https://tfhub.dev")>-1,p=f.landmarkModelUrl.indexOf("https://tfhub.dev")>-1,[4,Promise.all([Dr(f.detectorModelUrl,{fromTFHub:c}),Dr(f.landmarkModelUrl,{fromTFHub:p})])];case 1:return s=g.sent(),d=s[0],y=s[1],[2,new Ei(d,y,f.maxHands)]}})})}function Fi(l,f){return ft(this,void 0,void 0,function(){var c,p;return ct(this,function(s){if(l===Fe.MediaPipeHands){if(p=void 0,(c=f)!=null){if(c.runtime==="tfjs")return[2,Oi(c)];if(c.runtime==="mediapipe")return[2,oi(c)];p=c.runtime}throw new Error("Expect modelConfig.runtime to be either 'tfjs' or 'mediapipe', but got "+p)}throw new Error(l+" is not a supported model name.")})})}(function(l){l.MediaPipeHands="MediaPipeHands"})(Fe||(Fe={}));export{Fe as SupportedModels,Fi as createDetector};
