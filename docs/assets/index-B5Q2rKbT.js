var Y=Object.defineProperty;var B=(o,t,e)=>t in o?Y(o,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[t]=e;var i=(o,t,e)=>B(o,typeof t!="symbol"?t+"":t,e);import{L as W,B as y,a as j,i as V,b as Z,D as q,g as Q,C as $,N as K,M as S,V as m,c as x,d as l,S as J,R as A,E as tt,P as et,e as it,A as st,H as nt,f as at,h as M,j as H,k as R,l as T,m as ot,G as rt,F as ht,T as ct,n as dt,o as lt,p as ut,q as mt,O as pt,r as gt,s as L,t as C,u as wt,v as yt,W as St,w as ft,x as vt,y as Pt,z as Dt,I as Et,J as Mt,K as Rt,Q as Tt,U as Lt,X as Ct,Y as N,Z as D,_ as bt,$ as xt,a0 as g,a1 as u,a2 as At}from"./vendor-B1cob_1Z.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&s(r)}).observe(document,{childList:!0,subtree:!0});function e(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function s(n){if(n.ep)return;n.ep=!0;const a=e(n);fetch(n.href,a)}})();const Ht=""+new URL("my_stardew_valley_farm-qyeIgYac.glb",import.meta.url).href;function Nt(o){return new Worker(""+new URL("navmesh-worker-BZEHHa0d.js",import.meta.url).href,{type:"module",name:o==null?void 0:o.name})}var p=(o=>(o[o.Default=0]="Default",o[o.DebugView=1]="DebugView",o))(p||{});class kt{constructor(t,e=!1){i(this,"navMesh");i(this,"crowd");i(this,"playerAgent");i(this,"pathLine");i(this,"debugDrawer");i(this,"scene");i(this,"debug",!1);this.pathLine=new W(new y,new j({color:255,linewidth:10})),t.add(this.pathLine),this.scene=t,this.debug=e}async init(t){await this.initNavMesh(t),this.initCrowd()}async initNavMesh(t){return console.time("init Recast"),await V(),console.timeEnd("init Recast"),new Promise(e=>{const s={cs:.2,ch:.2,tileSize:64,walkableSlopeAngle:35,walkableHeight:1,walkableClimb:1,walkableRadius:1,maxEdgeLen:12,maxSimplificationError:1.3,minRegionArea:8,mergeRegionArea:20,maxVertsPerPoly:6,detailSampleDist:6,detailSampleMaxError:1},n=new Nt;n.onmessage=d=>{console.timeEnd("Generate NavMesh");const v=d.data;this.navMesh=Z(v).navMesh,this.debug&&(this.debugDrawer=new q,this.debugDrawer.layers.set(p.DebugView),this.scene.add(this.debugDrawer),this.debugDrawer.clear(),this.debugDrawer.drawNavMesh(this.navMesh),this.debugDrawer.children.forEach(P=>{P.layers.set(p.DebugView)})),e()};const a=[];t.traverse(d=>{d instanceof S&&a.push(d)});const[r,h]=Q(a);console.time("Generate NavMesh"),n.postMessage({positions:r,indices:h,config:s},[r.buffer,h.buffer])})}initCrowd(){this.crowd=new $(this.navMesh,{maxAgents:10,maxAgentRadius:1})}getRandomPosition(t={x:0,y:0,z:0}){const s=new K(this.navMesh),{success:n,status:a,randomPolyRef:r,randomPoint:h}=s.findRandomPointAroundCircle(t,2);return h}addPlayer(t){this.playerAgent=this.crowd.addAgent(t,{radius:.5,height:1,maxSpeed:6,maxAcceleration:20,collisionQueryRange:.5,pathOptimizationRange:0,separationWeight:1})}movePlayerTo(t){var e;(e=this.playerAgent)==null||e.requestMoveTarget(t)}getPlayerPosition(){var t;return(t=this.playerAgent)==null?void 0:t.position()}update(t){var e;(e=this.crowd)==null||e.update(t),this.updatePath()}updatePath(){if(!this.playerAgent)return;this.pathLine.geometry.dispose(),this.pathLine.geometry=new y;const t=[this.playerAgent.position(),...this.playerAgent.corners()];this.pathLine.geometry.setFromPoints(t)}dispose(){var t,e;this.pathLine.geometry.dispose(),this.pathLine.material.dispose(),(t=this.navMesh)==null||t.destroy(),(e=this.debugDrawer)==null||e.dispose()}}class Ut{constructor(t,e,s,n={}){i(this,"camera");i(this,"target");i(this,"node");i(this,"currentPosition",new m);i(this,"currentLookAt",new m);i(this,"distance");i(this,"minDistance");i(this,"maxDistance");i(this,"rotationX");i(this,"rotationY");i(this,"minRotationX");i(this,"maxRotationX");i(this,"smoothSpeed");i(this,"minHeight");i(this,"rotationSpeed");i(this,"zoomSpeed");i(this,"touchRotationSensitivity");i(this,"touchZoomSensitivity");i(this,"enableCollision");i(this,"collisionLayers");i(this,"touchStart",new x);i(this,"prevTouchDistance",0);i(this,"isPointerDown",!1);i(this,"isTwoFingerTouch",!1);i(this,"onMouseWheel",t=>{t.preventDefault();const e=t.deltaY*.01;this.zoom(e)});i(this,"onTouchStart",t=>{t.touches.length===2&&(this.isTwoFingerTouch=!0,this.prevTouchDistance=this.getTouchDistance(t))});i(this,"onTouchMove",t=>{if(this.isTwoFingerTouch&&t.touches.length===2){const e=this.getTouchDistance(t),s=(this.prevTouchDistance-e)*this.touchZoomSensitivity;this.zoom(s),this.prevTouchDistance=e}});i(this,"onTouchEnd",()=>{this.isTwoFingerTouch=!1});i(this,"onPointerDown",t=>{this.isTwoFingerTouch||(this.isPointerDown=!0,this.touchStart.set(t.clientX,t.clientY))});i(this,"onPointerMove",t=>{if(!this.isPointerDown||this.isTwoFingerTouch)return;const e=t.clientX-this.touchStart.x,s=t.clientY-this.touchStart.y;this.rotate(e*this.touchRotationSensitivity,s*this.touchRotationSensitivity),this.touchStart.set(t.clientX,t.clientY)});i(this,"onPointerUp",()=>{this.isPointerDown=!1});this.camera=t,this.target=e,this.node=s;const{initialDistance:a=20,minDistance:r=5,maxDistance:h=30,initialRotationX:d=45,initialRotationY:v=45,minRotationX:P=-60,maxRotationX:k=60,smoothSpeed:U=.1,minHeight:_=.5,rotationSpeed:X=.5,zoomSpeed:G=1,touchRotationSensitivity:O=.5,touchZoomSensitivity:z=.2,enableCollision:I=!1,collisionLayers:F=[]}=n;this.distance=a,this.minDistance=r,this.maxDistance=h,this.rotationX=d,this.rotationY=v,this.minRotationX=P,this.maxRotationX=k,this.smoothSpeed=U,this.minHeight=_,this.rotationSpeed=X,this.zoomSpeed=G,this.touchRotationSensitivity=O,this.touchZoomSensitivity=z,this.enableCollision=I,this.collisionLayers=F,this.updateCameraPosition(),this.initControlEvent(s)}initControlEvent(t){t.addEventListener("pointerdown",this.onPointerDown),t.addEventListener("pointermove",this.onPointerMove),t.addEventListener("pointerup",this.onPointerUp),t.addEventListener("pointercancel",this.onPointerUp),t.addEventListener("touchstart",this.onTouchStart),t.addEventListener("touchmove",this.onTouchMove),t.addEventListener("touchend",this.onTouchEnd),t.addEventListener("touchcancel",this.onTouchEnd),t.addEventListener("wheel",this.onMouseWheel)}removeControlEvent(t){t.removeEventListener("pointerdown",this.onPointerDown),t.removeEventListener("pointermove",this.onPointerMove),t.removeEventListener("pointerup",this.onPointerUp),t.removeEventListener("pointercancel",this.onPointerUp),t.removeEventListener("touchstart",this.onTouchStart),t.removeEventListener("touchmove",this.onTouchMove),t.removeEventListener("touchend",this.onTouchEnd),t.removeEventListener("wheel",this.onMouseWheel)}getTouchDistance(t){const e=t.touches[0],s=t.touches[1];return Math.hypot(e.clientX-s.clientX,e.clientY-s.clientY)}rotate(t,e){this.rotationY-=t*this.rotationSpeed,this.rotationX+=e*this.rotationSpeed,this.rotationX=l.clamp(this.rotationX,this.minRotationX,this.maxRotationX)}zoom(t){this.distance=l.clamp(this.distance+t*this.zoomSpeed,this.minDistance,this.maxDistance)}updateCameraPosition(){var n;const t=new J(this.distance,l.degToRad(90-this.rotationX),l.degToRad(this.rotationY)),e=new m;e.setFromSpherical(t);const s=e.clone().normalize();if(this.enableCollision){const a=new A(this.target.position.clone(),s,this.camera.near,this.maxDistance);a.layers.set(p.Default),this.collisionLayers.length>0&&this.collisionLayers.forEach(h=>{a.layers.enable(h)}),a.layers.disable(p.DebugView);const r=a.intersectObjects(((n=this.target.parent)==null?void 0:n.children)||[],!0).filter(h=>h.distance>0);if(r.length>0){const h=r[0],d=Math.max(this.minDistance,h.distance-.5);e.copy(s).multiplyScalar(d)}}e.add(this.target.position),e.y<this.minHeight&&(e.y=this.minHeight),this.currentPosition.lerp(e,this.smoothSpeed),this.currentLookAt.lerp(this.target.position,this.smoothSpeed),this.camera.position.copy(this.currentPosition),this.camera.lookAt(this.currentLookAt)}setTarget(t){this.target=t}setDistance(t){this.distance=l.clamp(t,this.minDistance,this.maxDistance)}setRotation(t,e){this.rotationX=l.clamp(t,this.minRotationX,this.maxRotationX),this.rotationY=e}getConfig(){return{initialDistance:this.distance,minDistance:this.minDistance,maxDistance:this.maxDistance,minRotationX:this.minRotationX,maxRotationX:this.maxRotationX,initialRotationX:this.rotationX,initialRotationY:this.rotationY,minHeight:this.minHeight,smoothSpeed:this.smoothSpeed,rotationSpeed:this.rotationSpeed,zoomSpeed:this.zoomSpeed,touchRotationSensitivity:this.touchRotationSensitivity,touchZoomSensitivity:this.touchZoomSensitivity,enableCollision:this.enableCollision,collisionLayers:this.collisionLayers}}update(){this.updateCameraPosition()}dispose(){this.removeControlEvent(this.node)}}function b(o,t=16/9){return Math.atan(Math.tan(o*l.DEG2RAD*.5)/t)*l.RAD2DEG*2}const _t=""+new URL("waternormals-GyVNZj-v.png",import.meta.url).href;var w=(o=>(o.HOUR_CHANGED="hourChanged",o.MINUTE_CHANGED="minuteChanged",o.DAY_NIGHT_CHANGED="dayNightChanged",o.TIME_UPDATED="timeUpdated",o))(w||{});const f=class f extends tt{constructor(e={}){super();i(this,"hour");i(this,"minute");i(this,"seconds");i(this,"timeScale");i(this,"isPaused");i(this,"currentPhase");i(this,"accumulatedTime",0);i(this,"SECONDS_PER_MINUTE",60);i(this,"MINUTES_PER_HOUR",60);i(this,"HOURS_PER_DAY",24);this.hour=e.startHour??6,this.minute=e.startMinute??0,this.seconds=e.startSecond??0,this.timeScale=e.timeScale??1,this.isPaused=e.pauseOnStart??!1,this.currentPhase=this.calculateDayPhase()}static get ins(){return this._ins||(this._ins=new f({startHour:6,timeScale:1,pauseOnStart:!1})),this._ins}static destroy(){this._ins=null}update(e){if(!this.isPaused){if(this.accumulatedTime+=e*this.timeScale,this.seconds+=e*this.timeScale,this.seconds>=this.SECONDS_PER_MINUTE){const s=Math.floor(this.seconds/this.SECONDS_PER_MINUTE);this.seconds%=this.SECONDS_PER_MINUTE,this.addMinutes(s)}this.emit("timeUpdated",this.getTimeData())}}addMinutes(e){this.hour;const s=this.currentPhase;for(this.minute+=e;this.minute>=this.MINUTES_PER_HOUR;)this.minute-=this.MINUTES_PER_HOUR,this.hour=(this.hour+1)%this.HOURS_PER_DAY,this.emit("hourChanged",this.getTimeData());this.currentPhase=this.calculateDayPhase(),s!==this.currentPhase&&this.emit("dayNightChanged",this.getTimeData()),this.emit("minuteChanged",this.getTimeData())}getTimeString(){const e=this.hour.toString().padStart(2,"0"),s=this.minute.toString().padStart(2,"0"),n=this.seconds.toFixed(2).padStart(5,"0");return`${e}:${s}:${n}`}getTimeData(){return{hour:this.hour,minute:this.minute,seconds:this.seconds,phase:this.currentPhase,timeString:this.getTimeString()}}setTime(e,s=0,n=0){this.hour=e%this.HOURS_PER_DAY,this.minute=s%this.MINUTES_PER_HOUR,this.seconds=n%this.SECONDS_PER_MINUTE,this.currentPhase=this.calculateDayPhase(),this.emit("timeUpdated",this.getTimeData())}calculateDayPhase(){return this.hour>=5&&this.hour<7?"DAWN":this.hour>=7&&this.hour<17?"DAY":this.hour>=17&&this.hour<19?"DUSK":"NIGHT"}getCurrentPhase(){return this.currentPhase}setTimeScale(e){this.timeScale=Math.max(0,e)}getTimeScale(){return this.timeScale}pause(){this.isPaused=!0}resume(){this.isPaused=!1}togglePause(){this.isPaused=!this.isPaused}};i(f,"_ins");let c=f;class Xt{constructor(t,e,s={}){i(this,"lights");i(this,"scene");i(this,"sceneEnv");i(this,"sky");i(this,"sun");i(this,"debugHelpers",[]);i(this,"pmremGenerator");i(this,"water");this.scene=t,this.sun=new m,this.pmremGenerator=new et(e),this.lights={main:this.createMainLight(s),ambient:this.createAmbientLight(),hemisphere:this.createHemisphereLight()},Object.values(this.lights).forEach(n=>t.add(n)),this.initSky(),s.debug&&this.createDebugHelpers(),this.setupTimeListeners()}createMainLight(t){const e=new it(16777215,1.3);return e.position.set(50,50,50),t.shadows!==!1&&(e.castShadow=!0,e.shadow.intensity=1,e.shadow.mapSize.width=t.shadowMapSize||2048,e.shadow.mapSize.height=t.shadowMapSize||2048,e.shadow.camera.near=.5,e.shadow.camera.far=500,e.shadow.camera.left=-50,e.shadow.camera.right=50,e.shadow.camera.top=50,e.shadow.camera.bottom=-50,e.shadow.bias=-1e-4,e.shadow.normalBias=.02),e}createAmbientLight(){return new st(6591981,.3)}createHemisphereLight(){return new nt(8900331,9498256,.3)}setWater(t){this.water=t}initSky(){this.sky=new at,this.sky.scale.setScalar(1e4),this.scene.add(this.sky);const e=this.sky.material.uniforms;e.turbidity.value=10,e.rayleigh.value=2,e.mieCoefficient.value=.005,e.mieDirectionalG.value=.8}setupTimeListeners(){c.ins.on(w.TIME_UPDATED,s=>{const n=s.hour+s.minute/60+s.seconds/3600;this.updateSunPosition(n),this.updateLightIntensities(n)});const t=c.ins.getTimeData(),e=t.hour+t.minute/60+t.seconds/3600;this.updateSunPosition(e),this.updateLightIntensities(e)}updateLightIntensities(t){const e=(t-6)%24/24,s=Math.cos((e-.5)*Math.PI*2);let n=Math.max(.2,s)*1.4,a=.3+Math.max(0,s)*.4;const r=new M,h=new M;if(t<6||t>18)r.setHSL(.6,.3,.08),h.setHSL(.6,.25,.04),n=0,a=Math.max(.1,a);else if(t<8){const d=(t-6)/2;r.setHSL(.1,.7,.6+d*.3),h.setHSL(.1,.5,.3+d*.2),n=Math.max(.4,n)}else if(t>16){const d=(18-t)/2;r.setHSL(.07,.7,.6+d*.3),h.setHSL(.07,.5,.3+d*.2),n=Math.max(.4,n)}else r.setHSL(.55,.3,.9),h.setHSL(.3,.4,.6),n=Math.max(.6,n);this.lights.main.intensity=n,this.lights.ambient.intensity=a,this.lights.hemisphere.color.copy(r),this.lights.hemisphere.groundColor.copy(h)}updateSunPosition(t){const{azimuth:e,elevation:s}=this.calculateSunAngles(t),n=l.degToRad(90-s),a=l.degToRad(e);this.sun.setFromSphericalCoords(1,n,a),this.sky.material.uniforms.sunPosition.value.copy(this.sun);const h=this.sun.clone().multiplyScalar(100);this.lights.main.position.copy(h),this.water&&this.water.material.uniforms.sunDirection.value.copy(this.sun).normalize(),this.updateEnvironmentMap()}calculateSunAngles(t){const e=(t-12)*15,n=75*Math.cos(e*Math.PI/180),a=e;return t<6||t>18?{azimuth:a,elevation:Math.min(-10,n)}:{azimuth:a,elevation:Math.max(-10,n)}}updateEnvironmentMap(){this.sceneEnv=new H,this.sceneEnv.add(this.sky),this.sky.material.uniforms.sunPosition.value.copy(this.sun);const e=this.pmremGenerator.fromScene(this.sceneEnv);this.scene.environment=e.texture,this.scene.background=e.texture,e.dispose(),this.scene.add(this.sky)}createDebugHelpers(){const t=new R(this.lights.main),e=new T(this.lights.main.shadow.camera);this.debugHelpers.push(t,e),this.debugHelpers.forEach(s=>this.scene.add(s))}dispose(){c.ins.off(w.TIME_UPDATED,()=>{}),c.ins.off(w.DAY_NIGHT_CHANGED,()=>{}),this.debugHelpers.forEach(t=>{this.scene.remove(t),(t instanceof R||t instanceof T)&&t.dispose()}),this.sky.geometry&&this.sky.geometry.dispose(),this.sky.material&&(Array.isArray(this.sky.material)?this.sky.material.forEach(t=>t.dispose()):this.sky.material.dispose()),this.scene.remove(this.sky),Object.values(this.lights).forEach(t=>{var e;this.scene.remove(t),(e=t.shadow)!=null&&e.map&&t.shadow.map.dispose()})}}const E=new ot;E.showPanel(0);document.body.appendChild(E.dom);const Gt=new rt;new ht;const Ot=new ct;class zt{constructor(t){i(this,"composer");i(this,"canvas");i(this,"renderer");i(this,"scene");i(this,"camera");i(this,"thirdCamera");i(this,"mapScene");i(this,"player");i(this,"navigationSystem");i(this,"clock",new dt(!0));i(this,"outlineEffect");i(this,"water");i(this,"skyLightingSystem");i(this,"onMouseDown",(()=>{const t=new A;t.firstHitOnly=!0;const e=new x;return s=>{if(s.button!==2)return;const{clientX:n,clientY:a}=s,r=this.canvas.getBoundingClientRect();e.x=(n-r.left)/this.canvas.offsetWidth*2-1,e.y=-((a-r.top)/this.canvas.offsetHeight)*2+1,t.setFromCamera(e,this.camera),console.time("raycast");const h=t.intersectObject(this.mapScene);if(console.timeEnd("raycast"),h.length>0){const d=h[0].point;this.navigationSystem.movePlayerTo(d)}}})());i(this,"onResize",()=>{this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),this.camera.aspect=window.innerWidth/window.innerHeight;const t=b(90,Math.max(this.camera.aspect,16/9));this.camera.fov=t,this.camera.updateProjectionMatrix(),this.composer.setSize(window.innerWidth,window.innerHeight)});i(this,"onUpdate",()=>{var e,s;E.update();const t=this.clock.getDelta();this.composer.render(),(e=this.navigationSystem)==null||e.update(t),(s=this.navigationSystem)!=null&&s.getPlayerPosition()&&this.player.position.copy(this.navigationSystem.getPlayerPosition()),this.thirdCamera.update(),this.water.material.uniforms.time.value+=t,c.ins.update(t)});this.canvas=t}async start(){c.ins.setTimeScale(100),this.initScene(),this.initPostProcessing(),await this.addMap(),this.outlineEffect.selection.add(this.player),this.navigationSystem=new kt(this.scene),await this.navigationSystem.init(this.mapScene);const t=this.navigationSystem.getRandomPosition();this.navigationSystem.addPlayer(t),this.renderer.setAnimationLoop(this.onUpdate),this.onResize(),window.addEventListener("resize",this.onResize),this.canvas.addEventListener("mousedown",this.onMouseDown),this.debugUI()}debugUI(){const t=c.ins.getTimeData(),s=new lt().addFolder("Time");s.add(c.ins,"hour",0,23).onChange(n=>{c.ins.setTime(n,t.minute,t.seconds)}),s.add(c.ins,"minute",0,59).onChange(n=>{c.ins.setTime(t.hour,n,t.seconds)}),s.add(c.ins,"seconds",0,59).onChange(n=>{c.ins.setTime(t.hour,t.minute,n)}),s.add(c.ins,"timeScale",0,5e3).onChange(n=>{c.ins.setTimeScale(n)}),s.open()}initPostProcessing(){const{scene:t,camera:e,renderer:s}=this,n=this.composer=new ut(s);n.addPass(new mt(t,e)),pt.workaroundEnabled=!0;const a=this.outlineEffect=new gt(t,e,{blendFunction:L.SCREEN,edgeStrength:8,visibleEdgeColor:0,hiddenEdgeColor:16711935,xRay:!0});n.addPass(new C(e,a)),n.addPass(new C(e,new wt({blendFunction:L.NORMAL})))}initScene(){this.scene=new H;const t=window.innerWidth/window.innerHeight,e=b(90,Math.max(t,16/9));this.camera=new yt(e,window.innerWidth/window.innerHeight,.1,1e3);const s=this.renderer=new St({canvas:this.canvas,powerPreference:"high-performance",antialias:!1,stencil:!1,depth:!1,logarithmicDepthBuffer:!1});s.setClearColor(16777215),s.shadowMap.enabled=!0,s.shadowMap.type=ft,s.outputColorSpace=vt,s.toneMapping=Pt,s.toneMappingExposure=.5,this.player=new S(new Dt(1,1,1),new Et),this.player.castShadow=!0,this.player.receiveShadow=!0,this.scene.add(this.player),this.thirdCamera=new Ut(this.camera,this.player,this.canvas,{maxDistance:100});const n=new Mt(1e3,1e3),a=this.water=new Rt(n,{textureWidth:512,textureHeight:512,waterNormals:Ot.load(_t,function(r){r.wrapS=r.wrapT=Tt}),sunDirection:new m,sunColor:16777215,waterColor:7695,distortionScale:3.7,fog:this.scene.fog!==void 0});a.rotation.x=-Math.PI/2,this.scene.add(a),this.skyLightingSystem=new Xt(this.scene,this.renderer,{shadows:!0,shadowMapSize:4096,debug:!1}),this.skyLightingSystem.setWater(this.water)}async addMap(){const t=await Gt.loadAsync(Ht);this.mapScene=t.scene,this.mapScene.scale.set(5,5,5),this.scene.add(t.scene),t.scene.traverse(e=>{e instanceof S&&(e.castShadow=!0,e.receiveShadow=!0)})}destroy(){var t,e;window.removeEventListener("resize",this.onResize),this.canvas.removeEventListener("mousedown",this.onMouseDown),this.renderer.dispose(),(t=this.navigationSystem)==null||t.dispose(),(e=this.skyLightingSystem)==null||e.dispose()}}y.prototype.computeBoundsTree=Lt;y.prototype.disposeBoundsTree=Ct;S.prototype.raycast=N;D.prototype.computeBoundsTree=bt;D.prototype.disposeBoundsTree=xt;D.prototype.raycast=N;function It(){const[o,t]=g.useState(!0),e=g.useRef(null),s=g.useRef(null);return g.useEffect(()=>((async()=>{s.current=new zt(e.current),await s.current.start(),t(!1)})(),()=>{var a;(a=s.current)==null||a.destroy()}),[]),u.jsxs("div",{className:"app",children:[u.jsx("canvas",{className:"gameCanvas",onContextMenu:n=>n.preventDefault(),ref:e}),o&&u.jsxs("div",{className:"loading",children:[u.jsx("div",{className:"loading-spinner"}),u.jsx("div",{className:"loading-text",children:"Loading..."})]})]})}At(document.getElementById("root")).render(u.jsx(It,{}));
